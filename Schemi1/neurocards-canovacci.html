<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroOral Pro - Allenamento Risposte Orali Neurologiche</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --light: #f9fafb;
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f172a;
            color: #e2e8f0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(to bottom right, #1e1b4b, #312e81, #1e1b4b);
            overflow: hidden;
        }

        .bg-animation::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%);
            animation: pulse 15s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }

        /* Glass Morphism Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        /* Header with Glassmorphism */
        .header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .header h1 {
            font-size: 2.5rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            font-weight: 800;
        }

        /* Stats Cards with Animation */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: var(--gradient);
            border-radius: 20px;
            opacity: 0;
            z-index: -1;
            transition: opacity 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: transparent;
        }

        .stat-card:hover::before {
            opacity: 0.3;
        }

        .stat-card h3 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        /* Modal for Category Selection */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: rgba(30, 27, 75, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            margin: 50px auto;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Category Checkboxes */
        .category-list {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .category-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .category-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .category-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
        }

        /* Controls Section */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .control-btn {
            background: rgba(99, 102, 241, 0.2);
            border: 1px solid rgba(99, 102, 241, 0.3);
            color: #a5b4fc;
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(99, 102, 241, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s ease, height 0.5s ease;
        }

        .control-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(99, 102, 241, 0.3);
            border-color: var(--primary);
            color: white;
        }

        /* Flashcard with 3D Effect */
        .flashcard {
            background: transparent;
            border-radius: 20px;
            margin: 0 auto 30px;
            max-width: 700px;
            height: 450px;
            position: relative;
            cursor: pointer;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: rgba(30, 27, 75, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .flashcard-back {
            transform: rotateY(180deg);
            background: rgba(45, 40, 100, 0.9);
        }

        /* Category Badge */
        .category-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--gradient);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        /* Edit Button */
        .edit-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }

        .edit-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        /* Difficulty Buttons */
        .difficulty-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            z-index: 10;
        }

        .difficulty-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .difficulty-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.3s ease, height 0.3s ease;
        }

        .difficulty-btn:hover::after {
            width: 150px;
            height: 150px;
        }

        .easy {
            background: var(--success);
            color: white;
        }

        .medium {
            background: var(--warning);
            color: white;
        }

        .hard {
            background: var(--danger);
            color: white;
        }

        /* Progress Bar */
        .progress-container {
            background: rgba(255, 255, 255, 0.1);
            height: 10px;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            background: var(--gradient);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progress-shine 2s linear infinite;
        }

        @keyframes progress-shine {
            from { transform: translateX(-100%); }
            to { transform: translateX(100%); }
        }

        /* Session Complete */
        .session-complete {
            background: rgba(30, 27, 75, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: bounceIn 0.5s ease;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Edit Modal */
        .edit-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
        }

        .edit-content {
            background: rgba(30, 27, 75, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            max-width: 700px;
            margin: 50px auto;
            max-height: 80vh;
            overflow-y: auto;
        }

        .edit-content h3 {
            margin-bottom: 20px;
            color: #a5b4fc;
        }

        .edit-input {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .edit-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
        }

        textarea.edit-input {
            min-height: 150px;
            resize: vertical;
            font-family: inherit;
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .slide-up {
            animation: slideUp 0.5s ease;
        }

        .bounce {
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(30, 27, 75, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px 30px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 3000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.success {
            border-color: var(--success);
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .stats {
                grid-template-columns: 1fr;
            }

            .flashcard {
                height: 400px;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .difficulty-buttons {
                flex-direction: column;
                width: 100%;
            }

            .difficulty-btn {
                width: 100%;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Keyboard Shortcuts */
        .keyboard-hints {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(30, 27, 75, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            font-size: 0.875rem;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .keyboard-hints:hover {
            opacity: 1;
        }

        .keyboard-hint {
            margin: 5px 0;
        }

        .key {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
            margin-right: 5px;
            font-family: monospace;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Stili per il testo della Domanda e della Risposta nelle flashcard */
        .flashcard-front p,
        .flashcard-back p {
            max-height: 220px;
            overflow-y: auto;
            padding-right: 10px;
            line-height: 1.7;
            text-align: left;
            width: 90%;
            margin-top: 15px;
            margin-bottom: 15px;
            color: #e2e8f0;
            font-size: 16px;
        }

        .flashcard-front p {
            font-size: 18px;
            line-height: 1.8;
        }

        .flashcard-back p {
            white-space: pre-line;
        }

        /* Stili per le scrollbar */
        .flashcard-front p::-webkit-scrollbar,
        .flashcard-back p::-webkit-scrollbar {
            width: 8px;
        }

        .flashcard-front p::-webkit-scrollbar-track,
        .flashcard-back p::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .flashcard-front p::-webkit-scrollbar-thumb,
        .flashcard-back p::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        .flashcard-front p::-webkit-scrollbar-thumb:hover,
        .flashcard-back p::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>🎤 NeuroOral Pro</h1>
            <p>Sistema di Allenamento per Risposte Orali Neurologiche</p>
        </div>

        <!-- Stats Dashboard -->
        <div class="stats">
            <div class="stat-card">
                <h3 id="cardsStudied">0</h3>
                <p>Carte Studiate</p>
            </div>
            <div class="stat-card">
                <h3 id="correctAnswers">0</h3>
                <p>Risposte Corrette</p>
            </div>
            <div class="stat-card">
                <h3 id="streak">0</h3>
                <p>Serie Corrente</p>
            </div>
            <div class="stat-card">
                <h3 id="totalProgress">0%</h3>
                <p>Progresso Totale</p>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button class="control-btn" onclick="openCategoryModal()">
                📚 Seleziona Categorie
            </button>
            <button class="control-btn" onclick="shuffleCards()">
                🔀 Mescola
            </button>
            <button class="control-btn" onclick="saveProgress()">
                💾 Scarica Progresso
            </button>
            <button class="control-btn" onclick="loadProgress()">
                📂 Carica Progresso
            </button>
            <button class="control-btn" onclick="resetSession()">
                🔄 Reset Sessione
            </button>
            <button class="control-btn" onclick="showOnlyDifficult()">
                😰 Solo Difficili
            </button>
            <button class="control-btn" onclick="resetProgress()">
                🗑️ Reset Progresso
            </button>
            <button class="control-btn" onclick="openAddCardModal()">
                ➕ Aggiungi Nuova Carta
            </button>
        </div>

        <!-- Card Counter -->
        <div style="text-align: center; margin: 20px 0; font-size: 1.1rem;">
            Carta <span id="currentCard">1</span> di <span id="totalCards">0</span>
        </div>

        <!-- Flashcard Container -->
        <div id="flashcardContainer">
            <!-- Le flashcard verranno generate dinamicamente qui -->
        </div>

        <!-- Session Complete -->
        <div id="sessionComplete" class="session-complete" style="display: none;">
            <div style="font-size: 4rem; margin-bottom: 20px;">🎉</div>
            <h2 style="margin-bottom: 20px;">Sessione Completata!</h2>
            <p id="sessionSummary" style="font-size: 1.1rem; margin-bottom: 30px;"></p>
            <button class="control-btn" onclick="restartSession()">
                Inizia Nuova Sessione
            </button>
        </div>
    </div>

    <!-- Category Selection Modal -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 20px;">Seleziona Categorie da Studiare</h2>
            <div class="category-list" id="categoryList">
                <!-- Le categorie verranno generate dinamicamente -->
            </div>
            <div style="display: flex; gap: 15px; margin-top: 30px;">
                <button class="control-btn" onclick="selectAllCategories()">
                    Seleziona Tutto
                </button>
                <button class="control-btn" onclick="deselectAllCategories()">
                    Deseleziona Tutto
                </button>
                <button class="control-btn" style="background: var(--primary); color: white;" onclick="applyCategoryFilter()">
                    Applica Filtro
                </button>
                <button class="control-btn" onclick="closeCategoryModal()">
                    Annulla
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Card Modal -->
    <div id="editModal" class="edit-modal">
        <div class="edit-content">
            <h3>Modifica Flashcard</h3>
            <input type="text" id="editCategory" class="edit-input" placeholder="Categoria">
            <textarea id="editQuestion" class="edit-input" placeholder="Domanda"></textarea>
            <textarea id="editAnswer" class="edit-input" placeholder="Risposta"></textarea>
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <button class="control-btn" style="background: var(--success); color: white;" onclick="saveCardEdits()">
                    Salva Modifiche
                </button>
                <button class="control-btn" onclick="closeEditModal()">
                    Annulla
                </button>
            </div>
        </div>
    </div>

    <!-- Add Card Modal -->
    <div id="addCardModal" class="edit-modal">
        <div class="edit-content">
            <h3>Aggiungi Nuova Flashcard</h3>
            <input type="text" id="addCardCategory" class="edit-input" placeholder="Categoria (es. Neurologia Clinica)">
            <textarea id="addCardQuestion" class="edit-input" placeholder="Domanda"></textarea>
            <textarea id="addCardAnswer" class="edit-input" placeholder="Risposta"></textarea>
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <button class="control-btn" style="background: var(--success); color: white;" onclick="addNewCard()">
                    Aggiungi Carta
                </button>
                <button class="control-btn" onclick="closeAddCardModal()">
                    Annulla
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Keyboard Shortcuts -->
    <div class="keyboard-hints">
        <div class="keyboard-hint"><span class="key">Spazio</span> Gira carta</div>
        <div class="keyboard-hint"><span class="key">1</span> Facile</div>
        <div class="keyboard-hint"><span class="key">2</span> Medio</div>
        <div class="keyboard-hint"><span class="key">3</span> Difficile</div>
        <div class="keyboard-hint"><span class="key">E</span> Modifica</div>
    </div>

    <script>
        // Database delle flashcard neurologiche
        const flashcardsData = [
            {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi parli dell'Angiopatia Cerebrale Amiloide: inquadramento generale, epidemiologia ed eziopatogenesi.",
        "answer": "Certamente. L'Angiopatia Cerebrale Amiloide, o CAA, è un gruppo eterogeneo di patologie, sia sporadiche che familiari, definite dall'accumulo selettivo di peptide beta-amiloide nella parete dei vasi di piccolo e medio calibro, a livello cerebrale e leptomeningeo. È fondamentale sottolineare che questa deposizione non avviene in altri distretti corporei, differenziandola dalle amiloidosi sistemiche. Questa condizione induce una notevole fragilità vascolare, che è alla base del suo principale rischio clinico: l'emorragia cerebrale. \n\nDal punto di vista epidemiologico, la CAA ha un impatto significativo: è responsabile del 2-10% di tutte le emorragie cerebrali intraparenchimali e sale a una quota impressionante del 40-60% per le emorragie lobari, specie nella popolazione anziana. \n\nL'eziopatogenesi non è ancora del tutto chiarita, ma si ipotizza un disequilibrio tra la produzione e la clearance del peptide beta-amiloide. Nelle forme familiari, sembra prevalere un meccanismo di aumentata produzione. La classificazione patogenetica si basa sulla localizzazione dell'accumulo: la CAA di tipo 1 coinvolge capillari corticali e arterie/arteriole corticali e leptomeningee, mentre la CAA di tipo 2 risparmia i capillari, interessando solo arterie leptomeningee e corticali. \n\nUn fattore di rischio genetico ben noto è l'allele APOE-epsilon 4, associato a una maggiore deposizione di beta-amiloide. Al contrario, l'allele epsilon 2, pur essendo meno legato all'accumulo, è associato a un maggior rischio di complicanze emorragiche. L'allele epsilon 3 è considerato neutrale. La comprensione di questi aspetti è cruciale per inquadrare correttamente il rischio del paziente e interpretare i reperti neuroradiologici.",
        "difficulty": 2,
        "id": 1
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Qual è la presentazione clinica tipica dell'Angiopatia Cerebrale Amiloide?",
        "answer": "La presentazione clinica della CAA è varia e riflette la patofisiologia sottostante della fragilità vascolare e del danno microvascolare. Possiamo identificare quattro manifestazioni principali. \n\nPrimo, le emorragie cerebrali lobari ricorrenti. A differenza delle emorragie ipertensive, che sono tipicamente profonde, quelle da CAA si localizzano nei lobi cerebrali (frontale, parietale, temporale, occipitale), vicino alla corteccia. Questa localizzazione è un ‘red flag’ diagnostico, specialmente in un paziente anziano non iperteso. \n\nSecondo, un fenomeno molto specifico sono gli ‘amyloid spells’, ovvero episodi neurologici focali transitori, presenti nel 10-15% dei pazienti. Questi episodi durano tipicamente 10-30 minuti e sono caratterizzati da una combinazione di sintomi negativi, come debolezza o intorpidimento 'stroke-like', e sintomi positivi predominanti, come fenomeni visivi 'aura-like' o mioclono degli arti. Spesso sono associati a piccole emorragie subaracnoidee della convessità e possono precedere di mesi un'emorragia maggiore. \n\nTerzo, possiamo riscontrare emorragie subaracnoidee non traumatiche localizzate alla convessità cerebrale, dovute alla rottura dei fragili vasi leptomeningei, a differenza delle classiche ESA da rottura di aneurisma che interessano le cisterne della base. \n\nInfine, nel lungo termine, il danno microvascolare cronico porta a leucoaraiosi, encefalopatia e, negli stadi avanzati, a un decadimento cognitivo che può culminare in una vera e propria demenza vascolare. La coesistenza di CAA e malattia di Alzheimer è peraltro molto frequente, condividendo la stessa anomalia proteica.",
        "difficulty": 2,
        "id": 2
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi illustri l'iter diagnostico e i criteri di Boston 2.0 per l'Angiopatia Cerebrale Amiloide.",
        "answer": "La diagnosi di certezza dell'Angiopatia Cerebrale Amiloide è purtroppo solo post-mortem, basata sull'esame istopatologico. Tuttavia, nella pratica clinica, ci avvaliamo di criteri validati, i Criteri di Boston, recentemente aggiornati alla versione 2.0 nel 2022, che integrano dati clinici e radiologici per stratificare la probabilità diagnostica. \n\nQuesti criteri si applicano a pazienti di età superiore a 50 anni che si presentano con emorragia intracerebrale, ‘amyloid spells’ o deficit cognitivo. La base della diagnosi è la risonanza magnetica, in particolare le sequenze T2-star o SWI, sensibili ai depositi di emosiderina. \n\nSi definisce una 'CAA possibile' in presenza di una singola alterazione emorragica (come un'emorragia lobare, microbleeds, o emosiderosi superficiale) oppure in presenza di alterazioni della sostanza bianca come spazi perivascolari dilatati nel centro semiovale o leucoencefalopatia multifocale. Un criterio essenziale è l'assenza di emorragie in sedi profonde o di altre cause evidenti. È importante notare che le emorragie cerebellari sono considerate alla stregua di quelle profonde, quindi non tipiche di CAA. \n\nPer raggiungere una diagnosi di 'CAA probabile', il livello di confidenza aumenta. Sono necessarie almeno due alterazioni emorragiche tra emorragia lobare, microbleeds o emosiderosi corticale. In alternativa, è sufficiente una di queste lesioni emorragiche in associazione a una delle alterazioni della sostanza bianca già menzionate. \n\nInfine, la 'CAA probabile con evidenza anatomopatologica' richiede la soddisfazione dei criteri per la diagnosi probabile più la dimostrazione di amiloide vascolare in un campione bioptico, mentre la 'CAA definita' resta confinata all'autopsia. Questi criteri sono fondamentali per la gestione clinica, in particolare per le decisioni terapeutiche riguardanti gli antitrombotici.",
        "difficulty": 3,
        "id": 3
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi parli della gestione terapeutica dell'Angiopatia Cerebrale Amiloide e del problema della terapia anticoagulante.",
        "answer": "La gestione della CAA è primariamente di supporto e focalizzata sulla prevenzione delle complicanze emorragiche. Ad oggi non esiste una terapia eziologica in grado di rimuovere i depositi di amiloide. Il cardine della gestione è un rigoroso controllo della pressione arteriosa, poiché l'ipertensione, anche lieve, può aumentare drasticamente il rischio di rottura dei vasi fragili. In caso di emorragia acuta, la gestione è quella classica dell'ICH, mirata a stabilizzare il paziente e a controllare la pressione endocranica. \n\nUna delle sfide cliniche più complesse è la gestione della terapia antitrombotica. L'uso di antiaggreganti o anticoagulanti è tendenzialmente controindicato a causa dell'elevato rischio emorragico. Tuttavia, molti di questi pazienti anziani presentano comorbidità come la fibrillazione atriale, che richiederebbero una terapia anticoagulante. In questi casi, la decisione deve essere attentamente ponderata, caso per caso. \n\nSi deve effettuare una valutazione multidimensionale che includa il rischio tromboembolico (usando score come il CHA2DS2-VASc), il rischio emorragico individuale (valutando storia di emorragie, presenza e numero di microbleeds alla RM) e le preferenze del paziente. Le linee guida suggeriscono che in un paziente con storia di emorragia lobare o con un alto carico di microbleeds, l'anticoagulazione è controindicata. Se si opta per l'anticoagulazione, si preferiscono i DOAC per il loro profilo di sicurezza migliore rispetto al warfarin e si deve monitorare attentamente il paziente, evitando terapie multiple come la triplice. In casi selezionati ad alto rischio emorragico, si può considerare la chiusura percutanea dell'auricola sinistra come alternativa all'anticoagulazione. Infine, per la trombolisi in corso di ictus ischemico, le linee guida AHA/ASA 2019 indicano una controindicazione se sono presenti più di 10 microbleeds.",
        "difficulty": 3,
        "id": 4
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Angiopatia Cerebrale Amiloide Infiammatoria (CAA-RI): clinica, diagnosi e diagnosi differenziale.",
        "answer": "L'angiopatia amiloide cerebrale infiammatoria, o CAA-RI, è una variante rara ma importante della CAA, poiché è una condizione potenzialmente reversibile se trattata tempestivamente. Si presenta in età mediamente più giovane rispetto alla forma classica, intorno ai 67 anni, con un decorso tipicamente acuto o subacuto. La clinica può mimare una sindrome encefalitica, con un rapido declino cognitivo e comportamentale, cefalea, crisi epilettiche e deficit neurologici focali, non necessariamente legati a un'emorragia evidente. \n\nLa diagnosi si basa su criteri clinico-radiologici. Per porre il sospetto di CAA-RI 'possibile', un paziente di età superiore ai 40 anni deve presentare uno dei sintomi menzionati e, alla risonanza magnetica, delle iperintensità della sostanza bianca (WMH) che si estendono alla sostanza bianca sottocorticale, associate ad almeno una lesione emorragica tipica della CAA (emorragia lobare, microbleeds o siderosi superficiale). \n\nLa diagnosi diventa 'probabile' quando a questi reperti si aggiunge la caratteristica chiave: l'asimmetria delle lesioni della sostanza bianca, che si presentano come un edema vasogenico esteso e confluente. Questa asimmetria non deve essere giustificata da un'emorragia pregressa in quella sede. Dal punto di vista di laboratorio, si possono riscontrare un aumento degli indici di flogosi come PCR e VES, e l'analisi del liquor può mostrare iperproteinorrachia e pleiocitosi linfocitaria. La biopsia cerebrale, che mostra flogosi perivascolare associata ai depositi di amiloide, conferma la diagnosi 'definita' ed è indicata in caso di dubbio diagnostico o mancata risposta alla terapia empirica. \n\nLa diagnosi differenziale è ampia e include vasculiti primarie del SNC, che colpiscono però pazienti più giovani; sindromi come PRES, che di solito non presenta lesioni emorragiche alla SWI; infezioni come la PML; e neoplasie come il linfoma primitivo del SNC.",
        "difficulty": 3,
        "id": 5
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Emorragia Cerebrale Intraparenchimale: definizione, classificazione ed eziologia.",
        "answer": "Certamente. L'emorragia cerebrale intraparenchimale (ICH) è uno stravaso di sangue all'interno del parenchima cerebrale, secondario alla rottura non traumatica di un vaso. Rappresenta una forma grave di ictus, costituendo circa il 10-20% di tutti i casi, con un'incidenza maggiore nella popolazione asiatica. \n\nPossiamo classificarla secondo due criteri principali: l'eziologia e la sede. \n\nSecondo l'eziologia, distinguiamo le forme primitive, che sono le più comuni (circa 80% dei casi), e le forme secondarie. La causa principale in assoluto è l'ipertensione arteriosa cronica, che provoca lipoialinosi e necrosi fibrinoide delle piccole arteriole perforanti. Altra causa primitiva importante, specialmente negli anziani, è l'Angiopatia Cerebrale Amiloide. Le forme secondarie, che costituiscono il 20% del totale, originano da una lesione preesistente. Tra queste troviamo sanguinamenti di neoplasie (come glioblastoma o metastasi da polmone, mammella e melanoma), trasformazione emorragica di un ictus ischemico, rottura di malformazioni vascolari come aneurismi o MAV, e coagulopatie, incluse quelle iatrogene da farmaci anticoagulanti o antiaggreganti. \n\nSecondo la sede, classifichiamo le emorragie in sovratentoriali (85% dei casi) e sottotentoriali (15%). Le sovratentoriali possono essere lobari, cioè più superficiali e spesso associate alla CAA, oppure profonde, a livello dei gangli della base, della capsula interna o del talamo, che sono le sedi tipiche dell'emorragia ipertensiva. Le emorragie sottotentoriali, invece, coinvolgono il cervelletto o il troncoencefalo, anch'esse frequentemente di natura ipertensiva e gravate da una prognosi severa per la compressione di strutture vitali. Infine, l'emorragia può essere o estendersi allo spazio intraventricolare, un fattore prognostico negativo. La corretta identificazione della sede e dell'eziologia è il primo passo fondamentale per la gestione del paziente.",
        "difficulty": 1,
        "id": 6
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi parli della presentazione clinica e dell'iter diagnostico in urgenza del paziente con emorragia cerebrale.",
        "answer": "La presentazione clinica dell'emorragia cerebrale intraparenchimale è quella di un ictus ad esordio improvviso e rapida progressione dei sintomi. Sul piano clinico è spesso indistinguibile da un ictus ischemico, motivo per cui l'imaging cerebrale è mandatorio e urgente. Tuttavia, alcuni segni sono più suggestivi di una causa emorragica: un'alterazione dello stato di coscienza, presente in circa il 50% dei casi e che può arrivare fino al coma, una cefalea intensa (40%), e la presenza di nausea e vomito (fino al 50%), spesso legati all'ipertensione endocranica. Spesso nell'anamnesi si rileva un picco ipertensivo. \n\nL'iter diagnostico in urgenza si basa su tre pilastri: clinica, imaging e laboratorio. La valutazione clinica iniziale si avvale di scale come la NIHSS per quantificare il deficit e la Glasgow Coma Scale (GCS) per valutare lo stato di coscienza. \n\nIl gold standard per l'imaging è la Tomografia Computerizzata (TC) del cranio senza mezzo di contrasto, che deve essere eseguita immediatamente. La TC mostra l'emorragia come un'area iperdensa nel parenchima, permettendo di definirne sede, volume e l'eventuale presenza di complicanze come edema perilesionale, effetto massa o invasione ventricolare. Sedi tipicamente ipertensive sono i nuclei della base, il talamo, il ponte e il cervelletto. Una localizzazione lobare in un paziente anziano deve far sospettare una CAA. \n\nIn casi selezionati, come in pazienti giovani, non ipertesi o con localizzazione atipica, si procede con un'angio-TC per escludere cause secondarie come aneurismi o malformazioni vascolari. \n\nContemporaneamente, gli esami di laboratorio sono cruciali: emocromo per escludere piastrinopenie, test di coagulazione (INR, aPTT) per identificare coagulopatie, e test per la funzionalità renale ed epatica, importanti anche per la gestione delle terapie. La glicemia deve essere monitorata, poiché l'iperglicemia è un fattore prognostico negativo. Questo approccio integrato consente una diagnosi rapida e l'avvio tempestivo del trattamento appropriato.",
        "difficulty": 1,
        "id": 7
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Quali sono le principali complicanze dell'emorragia cerebrale e i fattori prognostici?",
        "answer": "L'emorragia cerebrale è gravata da un'alta mortalità, che si attesta tra il 35 e il 50% a 30 giorni, e le complicanze acute giocano un ruolo chiave in questa prognosi infausta. Le principali complicanze sono l'espansione dell'ematoma, l'edema cerebrale con ipertensione endocranica e l'idrocefalo. \n\nL'espansione dell'ematoma è un evento drammatico che si verifica tipicamente nelle prime ore, con il rischio maggiore entro le prime 3 ore dall'esordio. Un'espansione, anche modesta, peggiora significativamente l'outcome. I fattori di rischio per l'espansione includono un breve tempo tra esordio e imaging, una terapia antitrombotica in atto e un ampio volume iniziale dell'ematoma. Inoltre, specifici segni radiologici alla TC basale, come lo 'spot sign' all'angio-TC, che indica uno stravaso attivo, o il 'blend sign' e l'irregolarità dei margini alla TC senza contrasto, sono predittori di espansione. \n\nL'edema peri-ematoma è una reazione infiammatoria del parenchima che si sviluppa subito dopo l'emorragia e raggiunge il suo picco tra il secondo e il sesto giorno, contribuendo all'effetto massa e all'aumento della pressione intracranica, che può portare a erniazione cerebrale. \n\nL'idrocefalo ostruttivo è una complicanza temibile, specialmente in caso di emorragia in fossa cranica posteriore o con invasione ventricolare, e richiede un intervento neurochirurgico urgente. \n\nLa prognosi è determinata da diversi fattori. Per una valutazione standardizzata, utilizziamo l'ICH Score, che assegna punti in base a GCS all'ingresso, età superiore a 80 anni, volume dell'ematoma superiore a 30 mL, presenza di emorragia intraventricolare e localizzazione sottotentoriale. Un punteggio elevato si associa a una mortalità vicina al 100%. Altri fattori prognostici negativi sono l'eziologia, le comorbilità e le complicanze sistemiche di fase acuta, come iperglicemia o anemia.",
        "difficulty": 2,
        "id": 8
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi parli dei principi generali di gestione del paziente con emorragia cerebrale in Stroke Unit.",
        "answer": "La gestione del paziente con emorragia cerebrale intraparenchimale acuta richiede un approccio multidisciplinare e un monitoraggio intensivo, idealmente in una Stroke Unit, come raccomandato dalle principali linee guida internazionali come quelle dell'AHA/ASA e dell'ESO. L'obiettivo primario è limitare il danno cerebrale secondario. \n\nInnanzitutto, è fondamentale un monitoraggio neurologico stretto nelle prime 72 ore per cogliere precocemente ogni segno di deterioramento, che potrebbe indicare un'espansione dell'ematoma o un aumento della pressione intracranica. \n\nUn aspetto cruciale è la gestione dei parametri vitali. La febbre deve essere trattata aggressivamente per mantenere una temperatura corporea inferiore o uguale a 37.5°, in quanto l'ipertermia peggiora il danno neuronale. Analogamente, la glicemia deve essere controllata, con target tra 140 e 180 mg/dl per i pazienti diabetici, per evitare gli effetti deleteri sia dell'iper che dell'ipoglicemia. \n\nLa profilassi della trombosi venosa profonda (TVP) è un altro caposaldo. Si inizia subito con la compressione pneumatica intermittente. L'eparina a basso peso molecolare a dosi profilattiche viene generalmente introdotta dopo 24-48 ore, una volta confermata la stabilità dell'ematoma a un neuroimaging di controllo. \n\nIn caso di segni di ipertensione endocranica, si attuano misure di primo livello, come l'elevazione della testa del letto a 30 gradi e una lieve sedazione. L'uso di diuretici osmotici come il mannitolo è riservato a casi di grave deterioramento neurologico, in attesa di un intervento neurochirurgico, poiché la loro efficacia sull'outcome non è stata chiaramente dimostrata. I corticosteroidi sono invece da evitare, in quanto si sono dimostrati dannosi. \n\nInfine, la gestione delle crisi epilettiche: la profilassi anticrisi non è raccomandata di routine. Si tratta la prima crisi e si instaura una terapia a lungo termine solo in caso di crisi ricorrenti o di stato epilettico, anche non convulsivo, che deve essere ricercato con un EEG in caso di alterazione inspiegata dello stato mentale.",
        "difficulty": 1,
        "id": 9
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Qual è la gestione della Pressione Arteriosa nell'emorragia cerebrale acuta secondo le attuali linee guida?",
        "answer": "La gestione della pressione arteriosa nell'emorragia cerebrale acuta è uno dei punti più dibattuti e cruciali del trattamento, con l'obiettivo di bilanciare il rischio di espansione dell'ematoma, favorito da valori pressori elevati, con il rischio di ipoperfusione cerebrale nell'area peri-ematoma in caso di riduzione troppo aggressiva. \n\nLe linee guida attuali, come quelle AHA/ASA 2022, forniscono raccomandazioni precise. Il principio fondamentale è che un trattamento aggressivo e tempestivo, idealmente entro 2 ore dall'esordio, migliora la prognosi. \n\nPer i pazienti che si presentano con una pressione arteriosa sistolica (PAS) tra 150 e 220 mmHg e un'emorragia di entità lieve-moderata, le linee guida raccomandano di abbassare la PAS a un target di 140 mmHg. Studi clinici come INTERACT2 e ATACH-2 hanno mostrato che un target di 140 mmHg è sicuro e potenzialmente benefico, mentre un abbassamento più intensivo, a 120 mmHg, non ha dimostrato un miglioramento dell'outcome e potrebbe addirittura essere dannoso. È importante che l'abbassamento sia graduale, entro la prima ora, e non superiore a 90 mmHg rispetto ai valori di partenza per evitare l'ipoperfusione. \n\nNei casi con pressione arteriosa superiore a 220 mmHg o con emorragie molto voluminose, l'approccio deve essere più cauto, con un abbassamento controllato in ambiente intensivo. \n\nPer quanto riguarda la scelta farmacologica, gli agenti infusionali di prima linea sono il labetalolo, l'urapidil e la clevidipina, che consentono un controllo titolabile e rapido della pressione. Farmaci come il nitroprussiato di sodio sono generalmente sconsigliati per il rischio di aumentare la pressione intracranica a causa della sua azione venodilatatoria. Una volta stabilizzata la pressione con la terapia endovenosa, è importante passare a una terapia orale il prima possibile per mantenere un controllo stabile nel tempo. Questo approccio mirato e basato sull'evidenza è fondamentale per ottimizzare l'outcome del paziente.",
        "difficulty": 2,
        "id": 10
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Come si gestisce un'emorragia cerebrale in un paziente in terapia anticoagulante?",
        "answer": "L'emorragia cerebrale in un paziente in terapia anticoagulante rappresenta un'emergenza medica che richiede un'azione immediata e specifica per neutralizzare l'effetto del farmaco, parallelamente alla gestione generale del paziente. L'obiettivo è arrestare l'espansione dell'ematoma, che è particolarmente probabile in questi soggetti. \n\nLa strategia di reversal dipende dal tipo di anticoagulante assunto. \n\nSe il paziente è in terapia con Warfarin e presenta un INR elevato, tipicamente superiore a 2, la raccomandazione è di somministrare Vitamina K 10 mg per via endovenosa lenta e, contemporaneamente, un agente di reversal rapido. Il farmaco di scelta è il concentrato di complesso protrombinico a 4 fattori (PCC), dosato in base all'INR e al peso del paziente, ad esempio 30 UI/Kg. Questa combinazione permette un'azione rapida del PCC e un effetto più duraturo della Vitamina K. \n\nPer i pazienti in terapia con Anticoagulanti Orali Diretti (DOAC), disponiamo di antidoti specifici. \n\nIn caso di sanguinamento associato a Dabigatran, un inibitore diretto della trombina, l'antidoto specifico è l'Idarucizumab, un frammento di anticorpo monoclonale che lega il farmaco con altissima affinità. La dose standard è di 5 grammi endovena, somministrati in due flaconi in successione. \n\nPer i pazienti in terapia con inibitori del fattore Xa, come Apixaban, Rivaroxaban o Edoxaban, l'antidoto specifico è l'Andexanet Alfa, una proteina ricombinante che agisce come 'decoy' legando il farmaco. La sua somministrazione è fortemente raccomandata dalle linee guida. \n\nQualora gli antidoti specifici non fossero disponibili, si può considerare l'uso off-label del complesso protrombinico concentrato (PCC) anche per i DOAC, sebbene con un grado di evidenza inferiore. È cruciale che la somministrazione dell'antidoto avvenga il più rapidamente possibile, idealmente entro 1-2 ore dalla TC diagnostica e comunque entro poche ore dall'ultima assunzione del farmaco, poiché il tempo è un fattore critico per prevenire l'espansione dell'ematoma e migliorare l'outcome.",
        "difficulty": 2,
        "id": 11
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Quali sono le indicazioni al trattamento neurochirurgico dell'emorragia cerebrale intraparenchimale?",
        "answer": "La decisione di sottoporre un paziente con emorragia cerebrale a un intervento neurochirurgico è complessa e si basa su una valutazione attenta di fattori clinici e radiologici. L'obiettivo della chirurgia è rimuovere l'ematoma per ridurre l'effetto massa, abbassare la pressione intracranica e prevenire il danno secondario. Le indicazioni variano significativamente in base alla localizzazione dell'emorragia. \n\nPer le emorragie sovratentoriali, la chirurgia è generalmente considerata in pazienti con un ematoma lobare di volume intermedio, tra 30 e 60 mL, localizzato vicino alla superficie corticale, specialmente se si osserva un progressivo deterioramento dello stato di coscienza. In questi casi, l'evacuazione, preferibilmente con tecniche mininvasive, può essere salvavita. Al contrario, la chirurgia non è indicata in pazienti con emorragie profonde, GCS molto basso (≤ 8) ed ematomi molto voluminosi (> 60 ml) per via della prognosi infausta a prescindere dal trattamento, né per ematomi piccoli (< 30 mL) in pazienti clinicamente stabili, in cui i rischi superano i benefici. \n\nLa situazione è diversa e più urgente per le emorragie sottotentoriali, data la limitata capacità della fossa cranica posteriore. Per un'emorragia cerebellare, l'indicazione chirurgica è quasi assoluta se il diametro dell'ematoma è superiore a 3 cm, o il volume supera i 10-15 mL, oppure se sono presenti segni di compressione del troncoencefalo o idrocefalo ostruttivo. In questi casi, l'evacuazione chirurgica, spesso associata al posizionamento di una derivazione ventricolare esterna, è un'emergenza neurochirurgica. Al contrario, piccoli ematomi cerebellari (< 3 cm) senza compressione possono essere gestiti conservativamente con stretto monitoraggio. \n\nInfine, per le emorragie primitive del troncoencefalo, la chirurgia non è mai indicata, a causa dell'altissimo rischio di danneggiare strutture vitali. La decisione chirurgica, quindi, richiede un'attenta ponderazione e una stretta collaborazione tra neurologo, neuroradiologo e neurochirurgo.",
        "difficulty": 2,
        "id": 12
    },

    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi parli della classificazione eziologica TOAST per l'ictus ischemico.",
        "answer": "La classificazione TOAST (Trial of Org 10172 in Acute Stroke Treatment) è il sistema più utilizzato a livello internazionale per definire l'eziologia dell'ictus ischemico, con importanti implicazioni per la prognosi e la terapia di prevenzione secondaria. Suddivide gli ictus in 5 categorie. \n\nLa prima è l'aterosclerosi dei grossi vasi, che causa ictus per meccanismi di ipoperfusione da stenosi severa o per atero-embolismo da una placca ulcerata. Richiede l'identificazione di una stenosi superiore al 50% o inferiore ma con caratteristiche di vulnerabilità nel vaso pertinente. \n\nLa seconda categoria è il cardioembolismo. In questo caso l'ictus è causato da un embolo che origina dal cuore. Le fonti ad alto rischio includono la fibrillazione atriale, trombi intracavitari, valvole meccaniche o endocarditi. Un pattern di infarti multipli in territori vascolari diversi è molto suggestivo di questa eziologia. \n\nLa terza categoria è la malattia dei piccoli vasi o ictus lacunare, dovuto alla lipoialinosi delle piccole arterie perforanti. Radiologicamente, si manifesta con infarti sottocorticali di diametro inferiore a 1,5 cm. \n\nLa quarta categoria comprende gli ictus da 'altre cause determinate', un gruppo eterogeneo che include vasculopatie non aterosclerotiche come dissezioni e vasculiti, stati di ipercoagulabilità, malattie genetiche come CADASIL, e molte altre cause più rare. \n\nInfine, la quinta categoria è quella degli ictus da 'causa indeterminata', che si applica quando il work-up diagnostico è incompleto, quando coesistono due o più cause possibili, o quando, nonostante un'indagine completa, non si identifica alcuna eziologia (ictus criptogenico). La classificazione è stata poi affinata nella versione 'SS-TOAST', che introduce un livello di probabilità (definita, probabile, possibile) per ciascuna causa identificata.",
        "difficulty": 2,
        "id": 13
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi illustri la classificazione clinica di Bamford per l'ictus ischemico.",
        "answer": "La classificazione di Bamford, o dell'Oxfordshire Community Stroke Project, è un sistema di classificazione dell'ictus ischemico estremamente utile nella pratica clinica perché si basa esclusivamente sui segni e sintomi di presentazione, permettendo un inquadramento sindromico rapido, già al letto del paziente e prima dell'imaging. Suddivide gli ictus del circolo anteriore e posteriore in quattro categorie. \n\nIl TACI, acronimo di Total Anterior Circulation Infarct, rappresenta la sindrome più grave e corrisponde tipicamente all'occlusione del tratto terminale della carotide interna o del tratto M1 prossimale dell'arteria cerebrale media. Per la diagnosi devono essere presenti tutti e tre i seguenti criteri: un deficit motorio e/o sensitivo (emiparesi/emiplegia), un disturbo del campo visivo (emianopsia laterale omonima) e un disturbo delle funzioni corticali superiori, come afasia nell'emisfero dominante o neglect in quello non dominante. \n\nIl PACI, o Partial Anterior Circulation Infarct, implica un interessamento parziale del circolo anteriore, come un'occlusione di un ramo della cerebrale media o della cerebrale anteriore. Richiede la presenza di due dei tre criteri del TACI, oppure un deficit isolato delle funzioni corticali superiori. \n\nIl POCI, o Posterior Circulation Infarct, è definito dalla presenza di segni e sintomi riferibili al circolo vertebro-basilare. Questi includono segni cerebellari come atassia, segni di sofferenza del tronco encefalico come le sindromi alterne o deficit motori/sensitivi bilaterali, oppure un'emianopsia laterale omonima isolata. \n\nInfine, il LACI, o Lacunar Infarct, corrisponde a una sindrome lacunare pura, causata dall'occlusione di una singola arteriola perforante, senza alcun segno di interessamento corticale. Le sindromi classiche sono quella motoria pura, sensitiva pura, sensitivo-motoria e l'emiparesi atassica.",
        "difficulty": 1,
        "id": 14
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Quali sono le principali cause di ictus cardioembolico?",
        "answer": "L'ictus cardioembolico costituisce una quota molto rilevante degli ictus ischemici, tra il 20 e il 40% del totale. L'eziologia è varia, ma dominata da alcune condizioni cardiache ad alto rischio emboligeno. \n\nLa causa in assoluto più frequente è la fibrillazione atriale (FA), responsabile di circa il 50% di tutti gli ictus cardioembolici. La stasi ematica nell'atrio sinistro, e in particolare nell'auricola, favorisce la formazione di trombi che possono embolizzare nel circolo cerebrale. Questo rischio è presente sia nella FA permanente che in quella parossistica. \n\nUna seconda causa importante sono le valvulopatie. Le valvole protesiche, soprattutto quelle meccaniche, sono altamente trombogeniche e richiedono una terapia anticoagulante a vita con Warfarin per prevenire la formazione di trombi. Anche la valvulopatia mitralica reumatica è una fonte ad alto rischio. L'endocardite, sia settica che non settica come l'endocardite marantica in corso di neoplasie, è un'altra causa importante; le vegetazioni valvolari possono frammentarsi e causare emboli settici, con il rischio aggiuntivo di sviluppare aneurismi micotici. \n\nAltre fonti cardioemboliche significative includono la disfunzione ventricolare sinistra con acinesia o aneurisma della parete, tipica conseguenza di un infarto miocardico esteso, che può portare alla formazione di un trombo murale. Analogamente, lo scompenso cardiaco cronico con severa riduzione della frazione d'eiezione (sotto il 30%) aumenta il rischio di stasi e trombosi. \n\nCause più rare includono i tumori cardiaci primitivi, come il mixoma atriale, e le cardiomiopatie, in particolare quelle dilatative. L'identificazione della fonte cardioembolica è cruciale perché imposta una terapia di prevenzione secondaria basata sull'anticoagulazione orale, e non sulla sola antiaggregazione.",
        "difficulty": 2,
        "id": 15
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Cosa si intende per ESUS (Embolic Stroke of Undetermined Source) e qual è il suo trattamento?",
        "answer": "L'ictus criptogenico è un ictus ischemico in cui, nonostante un work-up diagnostico approfondito, non si riesce a identificare una causa certa. Rappresenta una quota significativa, fino al 40% di tutti gli ictus. All'interno di questa categoria, è stato definito un sottotipo specifico chiamato ESUS, acronimo di 'Embolic Stroke of Undetermined Source', cioè ictus embolico di origine indeterminata. \n\nPer definire un ictus come ESUS, devono essere soddisfatti tutti i seguenti criteri: primo, deve essere un infarto non lacunare alla TC o alla Risonanza Magnetica, quindi con un diametro superiore a 1.5 cm; secondo, deve esserci l'assenza di un'aterosclerosi significativa (>50% di stenosi) in un'arteria prossimale pertinente; terzo, deve esserci l'assenza di una fonte cardioembolica ad alto rischio, come la fibrillazione atriale; e quarto, l'assenza di altre cause specifiche di ictus, come una dissezione o una vasculite. In pratica, l'ESUS è un ictus che 'sembra' embolico, ma di cui non si trova la fonte. L'ipotesi è che le cause più probabili siano la fibrillazione atriale parossistica non rilevata o l'aterosclerosi non stenosante ma ulcerata. \n\nPer quanto riguarda il trattamento, l'ipotesi che l'ESUS fosse dovuto a embolismo ha spinto a testare la terapia anticoagulante rispetto a quella antiaggregante. Tuttavia, due grandi trial randomizzati, il NAVIGATE-ESUS con rivaroxaban e il RESPECT-ESUS con dabigatran, hanno dato risultati neutri: gli anticoagulanti orali diretti non si sono dimostrati superiori all'aspirina nel prevenire le recidive. Pertanto, ad oggi, la terapia standard per la prevenzione secondaria dell'ESUS rimane l'antiaggregazione piastrinica, associata a un monitoraggio cardiaco prolungato, ad esempio con loop recorder impiantabile, per cercare di smascherare una fibrillazione atriale parossistica che, se trovata, modificherebbe l'approccio terapeutico.",
        "difficulty": 2,
        "id": 16
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Qual è il ruolo del Forame Ovale Pervio (PFO) nell'ictus ischemico e come si gestisce?",
        "answer": "Il Forame Ovale Pervio (PFO) è un residuo della circolazione fetale, un piccolo tunnel tra atrio destro e sinistro presente in circa il 25% della popolazione generale. In condizioni normali è funzionalmente chiuso, ma può aprirsi transitoriamente durante manovre che aumentano la pressione in atrio destro, come la Valsalva. Il suo ruolo nell'ictus deriva dal meccanismo dell'embolismo paradosso: un trombo formatosi nel circolo venoso periferico può passare, attraverso il PFO, nel circolo arterioso sistemico e raggiungere il cervello, causando un ictus. \n\nIl PFO è considerato una potenziale causa di ictus soprattutto nei pazienti giovani con ictus criptogenico. La diagnosi dello shunt si basa sull'ecocardiografia transesofagea o sul doppler transcranico, entrambi eseguiti con 'bubble test', che visualizza il passaggio di microbolle di soluzione salina dall'atrio destro al sinistro. \n\nLa sfida clinica è stabilire se un PFO riscontrato in un paziente con ictus sia un reperto incidentale o la vera causa dell'evento. Per questo, si utilizzano score come il RoPE score, che stima la probabilità che il PFO sia patogenetico basandosi su età e fattori di rischio del paziente, e il più recente PASCAL score, che integra anche le caratteristiche morfologiche ad alto rischio del PFO, come la presenza di un aneurisma del setto interatriale. \n\nPer quanto riguarda la terapia di prevenzione secondaria, diversi studi randomizzati, come il CLOSE e il REDUCE, hanno dimostrato che nei pazienti giovani (sotto i 60 anni) con ictus criptogenico e PFO con caratteristiche di alto rischio, la chiusura percutanea del forame, seguita da terapia antiaggregante, è superiore alla sola terapia medica nel ridurre le recidive di ictus. Pertanto, nei pazienti attentamente selezionati in base a criteri clinici e anatomici, la chiusura del PFO è oggi considerata il trattamento di scelta.",
        "difficulty": 2,
        "id": 17
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi parli della dissezione arteriosa come causa di ictus.",
        "answer": "La dissezione delle arterie cervicali, ovvero carotidi e vertebrali, è una causa importante di ictus, in particolare nella popolazione giovane, dove rappresenta fino al 25% di tutti gli ictus ischemici. La patogenesi consiste in una lacerazione della tonaca intima del vaso, che permette al sangue di entrare nella parete arteriosa e di formare un ematoma intramurale. Questo ematoma può causare un'ischemia cerebrale attraverso due meccanismi principali: o stenotizzando progressivamente il lume del vaso fino all'occlusione, oppure fungendo da focolaio per la formazione di trombi che poi embolizzano distalmente. \n\nLe dissezioni possono essere spontanee, talvolta in associazione a connettivopatie come la displasia fibromuscolare, o traumatiche, anche a seguito di traumi minori o manipolazioni del collo. \n\nLa presentazione clinica è spesso caratteristica. La dissezione carotidea si manifesta tipicamente con dolore unilaterale al collo, alla testa o retro-orbitario, spesso accompagnato da una sindrome di Horner omolaterale parziale (miosi e ptosi senza anidrosi) dovuta al danno del plesso simpatico pericarotideo. La dissezione vertebrale si presenta con dolore alla nuca e può causare i sintomi di un ictus del circolo posteriore. In entrambi i casi, i sintomi ischemici possono comparire a distanza di ore o giorni dall'esordio del dolore. \n\nLa diagnosi si basa sull'imaging vascolare (Angio-TC o Angio-RM) che può mostrare un'irregolarità del profilo del vaso, la stenosi affusolata ('string sign') o l'ematoma intramurale stesso. \n\nIl trattamento si basa sulla terapia antitrombotica per prevenire l'embolizzazione. Lo studio CADISS non ha mostrato differenze significative tra terapia antiaggregante e anticoagulante, quindi entrambe sono considerate opzioni valide per 3-6 mesi. Il trattamento endovascolare con stenting è riservato ai casi con ischemia ricorrente nonostante la terapia medica ottimale.",
        "difficulty": 2,
        "id": 18
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi inquadri le vasculiti come causa di ictus, con un focus sull'Angioite Primitiva del SNC (PACNS).",
        "answer": "Le vasculiti sono un gruppo eterogeneo di malattie caratterizzate da un'infiammazione della parete dei vasi sanguigni che può portare a stenosi, occlusione trombotica, formazione di aneurismi e rottura, causando sia ictus ischemici che emorragici. Possono essere secondarie a malattie sistemiche, come connettiviti e infezioni, o primitive del sistema nervoso centrale (SNC). \n\nL'Angioite Primitiva del SNC, o PACNS, è la forma più importante per il neurologo. È una vasculite rara, confinata esclusivamente ai vasi dell'encefalo e del midollo spinale, senza evidenza di un coinvolgimento sistemico. Colpisce tipicamente individui di mezza età, con una lieve predominanza maschile. \n\nLa presentazione clinica è spesso insidiosa e progressiva. I sintomi più comuni sono una cefalea, spesso di nuova insorgenza e intensa, e un'encefalopatia subacuta con declino cognitivo, alterazioni comportamentali e crisi epilettiche. L'ictus ischemico, spesso multiplo e in territori diversi, e l'emorragia cerebrale sono le manifestazioni focali. \n\nLa diagnosi è complessa. I criteri di Calabrese richiedono la presenza di un deficit neurologico inspiegabile, la dimostrazione di vasculite tramite angiografia o biopsia, e l'assenza di patologie sistemiche che possano mimare il quadro. L'angiografia classicamente mostra stenosi segmentarie multifocali alternate a dilatazioni, con l'aspetto 'a corona di rosario'. L'analisi del liquor è spesso alterata, con pleiocitosi linfocitaria e iperproteinorrachia. La biopsia leptomeningea e corticale rimane il gold standard diagnostico, sebbene gravata da una quota di falsi negativi. \n\nIl trattamento si basa su una terapia immunosoppressiva aggressiva, solitamente con corticosteroidi ad alte dosi associati a ciclofosfamide nei casi più gravi, con l'obiettivo di indurre la remissione e prevenire danni neurologici permanenti.",
        "difficulty": 3,
        "id": 19
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi parli dell'Arterite a Cellule Giganti e della Malattia di Takayasu.",
        "answer": "Certamente. L'Arterite a Cellule Giganti (o Arterite Temporale di Horton) e la Malattia di Takayasu sono due forme di vasculite dei grandi vasi, ma con un profilo epidemiologico e clinico distinto. \n\nL'Arterite a Cellule Giganti è la vasculite più comune negli anziani, con un'insorgenza quasi esclusiva dopo i 50 anni. Colpisce tipicamente i rami extracranici dell'arteria carotide, in particolare l'arteria temporale, ma può interessare anche l'aorta e le sue branche. La clinica è dominata da sintomi sistemici come febbre e malessere, una cefalea tipicamente localizzata in sede temporale, e la claudicatio mandibolare. Il sintomo più temuto è il coinvolgimento dell'arteria oftalmica o delle ciliari, che causa una neuropatia ottica ischemica anteriore (NOIA), una condizione che porta a una perdita della vista improvvisa e irreversibile. L'ictus ischemico vero e proprio, da coinvolgimento delle carotidi o delle vertebrali, è più raro. La diagnosi si basa su indici di flogosi molto elevati, in particolare la VES, e sulla biopsia dell'arteria temporale. Il trattamento con corticosteroidi ad alte dosi deve essere iniziato immediatamente al sospetto clinico per prevenire la cecità. \n\nLa Malattia di Takayasu, al contrario, è una vasculite dei giovani, che colpisce prevalentemente donne sotto i 60 anni, specialmente di origine asiatica. È conosciuta come la 'malattia senza polso' perché colpisce l'arco aortico e le sue diramazioni principali, come le succlavie e le carotidi, causando stenosi e occlusioni. La clinica è legata all'ischemia degli organi a valle: può dare ipertensione nefrovascolare per stenosi delle arterie renali, claudicatio degli arti, asimmetria dei polsi o della pressione arteriosa, e ictus o TIA. La diagnosi si basa sull'imaging vascolare che mostra le stenosi. Anche in questo caso, il trattamento si basa su corticosteroidi e farmaci immunosoppressori.",
        "difficulty": 2,
        "id": 20
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Cos'è la Sindrome da Vasocostrizione Cerebrale Reversibile (RCVS)?",
        "answer": "La Sindrome da Vasocostrizione Cerebrale Reversibile (RCVS) è una vasculopatia acuta caratterizzata da un vasospasmo multifocale e segmentario delle arterie cerebrali, che si risolve spontaneamente entro 3 mesi. È una causa importante di cefalea a tipo 'thunderclap', ovvero a scoppio, ed è una diagnosi differenziale cruciale con l'emorragia subaracnoidea e la vasculite. \n\nColpisce più frequentemente le donne tra i 20 e i 50 anni. Sebbene possa essere idiopatica, è spesso scatenata dall'esposizione a farmaci o droghe vasoattive (come decongestionanti nasali, SSRI o cannabis) o da condizioni fisiologiche come il periodo post-partum. La patofisiologia è legata a una disregolazione transitoria del tono vascolare cerebrale. \n\nIl sintomo cardine è la cefalea 'thunderclap' ricorrente. Il paziente descrive attacchi di mal di testa che raggiungono la massima intensità in meno di un minuto, spesso scatenati da sforzi, tosse o attività sessuale. La RCVS può complicarsi con ictus ischemici, tipicamente nelle zone di confine, o emorragici, come emorragie lobari o piccole emorragie subaracnoidee della convessità. \n\nLa diagnosi si basa su due elementi chiave: primo, l'imaging vascolare (angio-TC o angio-RM) che mostra le tipiche stenosi multifocali ('a corona di rosario') dei vasi cerebrali; secondo, la dimostrazione della completa reversibilità di queste alterazioni in un imaging di controllo a 3 mesi. Un elemento distintivo importante rispetto alle vasculiti è che l'analisi del liquor è tipicamente normale o quasi. \n\nIl trattamento consiste nella rimozione del fattore scatenante, se identificato, e nel controllo dei sintomi. I calcio-antagonisti come la Nimodipina o il Verapamil sono usati per contrastare il vasospasmo e alleviare la cefalea. La prognosi è generalmente buona, con una risoluzione completa del quadro.",
        "difficulty": 2,
        "id": 21
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi parli della Malattia di Moyamoya.",
        "answer": "La malattia di Moyamoya è un'angiopatia steno-occlusiva cronica e progressiva che colpisce le arterie del circolo di Willis, in particolare i segmenti terminali delle carotidi interne e i tratti prossimali delle cerebrali anteriori e medie. La caratteristica patognomonica della malattia è la risposta del cervello a questa ischemia cronica: si sviluppa una fitta rete di piccoli vasi collaterali alla base del cranio, che all'angiografia assume un aspetto tipico descritto come 'nuvola di fumo', che in giapponese si dice appunto 'moyamoya'. \n\nEpidemiologicamente, ha una distribuzione bimodale, con un picco in età pediatrica, intorno ai 5 anni, e un secondo picco in età adulta, tra i 30 e i 40 anni. È più comune nelle popolazioni dell'Asia orientale, in particolare in Giappone. Distinguiamo la Malattia di Moyamoya, che è idiopatica o genetica, dalla Sindrome di Moyamoya, in cui il quadro angiografico è secondario ad altre condizioni come vasculiti, radioterapia cranica o anemia falciforme. \n\nLa presentazione clinica varia con l'età. Nei bambini, la malattia si manifesta prevalentemente con sintomi ischemici: TIA o ictus, spesso scatenati dal pianto o dall'iperventilazione, che riducendo la pCO2 causano vasocostrizione e peggiorano l'ipoperfusione. Negli adulti, invece, pur essendo presenti gli eventi ischemici, è più frequente la presentazione emorragica, a causa della rottura dei fragili vasi collaterali. \n\nLa diagnosi è angiografica. Il trattamento d'elezione nei pazienti sintomatici è chirurgico e consiste in procedure di rivascolarizzazione cerebrale. Si possono creare bypass diretti, come un'anastomosi tra l'arteria temporale superficiale e un ramo della cerebrale media, o bypass indiretti, per stimolare la neoangiogenesi. L'obiettivo è migliorare il flusso ematico cerebrale, ridurre lo stress emodinamico sui circoli collaterali e quindi prevenire sia gli eventi ischemici che quelli emorragici.",
        "difficulty": 3,
        "id": 22
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Cos'è la CADASIL?",
        "answer": "CADASIL è un acronimo che sta per Cerebral Autosomal Dominant Arteriopathy with Subcortical Infarcts and Leukoencephalopathy. È la forma più comune di arteriopatia cerebrale ereditaria e una causa importante di ictus e demenza vascolare in pazienti giovani e di mezza età. \n\nLa patologia è causata da mutazioni del gene NOTCH3, localizzato sul cromosoma 19. Questo gene codifica per un recettore transmembrana espresso sulle cellule muscolari lisce dei vasi, cruciale per la loro integrità. La mutazione porta all'accumulo di un materiale granulare osmiofilo nella parete delle piccole e medie arterie non solo a livello cerebrale ma in tutto il corpo, causandone la progressiva degenerazione. \n\nLa presentazione clinica è caratterizzata da una tipica successione di sintomi. Il primo sintomo, che insorge solitamente tra i 20 e i 30 anni, è l'emicrania, quasi sempre con aura, spesso atipica o prolungata. Successivamente, tra i 30 e i 45 anni, compaiono TIA o ictus ischemici lacunari ricorrenti, che portano a un progressivo accumulo di disabilità. Parallelamente, si sviluppano disturbi dell'umore, come depressione e apatia, e un deterioramento cognitivo, soprattutto a carico delle funzioni esecutive, che evolve verso una demenza conclamata in età più avanzata. \n\nLa diagnosi si basa sul sospetto clinico in un paziente giovane con ictus, emicrania e una storia familiare positiva. La risonanza magnetica cerebrale ha un aspetto molto caratteristico: mostra una leucoencefalopatia confluente e diffusa, ma con un coinvolgimento elettivo e quasi patognomonico dei poli temporali anteriori e della capsula esterna. La diagnosi di certezza è genetica, con la ricerca della mutazione del gene NOTCH3. Ad oggi non esiste una terapia specifica, e la gestione è sintomatica e di supporto, con un rigoroso controllo dei fattori di rischio vascolare.",
        "difficulty": 3,
        "id": 23
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi parli della Sindrome da Anticorpi Antifosfolipidi (APS) e della sua gestione neurologica.",
        "answer": "La Sindrome da Anticorpi Antifosfolipidi (APS) è una patologia autoimmune acquisita caratterizzata da uno stato di ipercoagulabilità che predispone a eventi trombotici, sia arteriosi che venosi, e a complicanze ostetriche. \n\nPer porre diagnosi, secondo i criteri di Sapporo, devono essere presenti almeno un criterio clinico e un criterio di laboratorio. I criteri clinici sono una trombosi vascolare (arteriosa, venosa o dei piccoli vasi) o una morbilità ostetrica (aborti ricorrenti o parto pretermine). I criteri di laboratorio consistono nel riscontro persistente, a distanza di almeno 12 settimane, di uno dei tre tipi di anticorpi antifosfolipidi: l'anticoagulante lupico (LAC), gli anticorpi anti-cardiolipina (aCL) o gli anticorpi anti-beta2-glicoproteina 1. La forma 'triplo positiva', con la presenza di tutti e tre gli anticorpi, è quella a più alto rischio trombotico. \n\nDal punto di vista neurologico, l'APS può causare TIA, ictus ischemici, trombosi dei seni venosi cerebrali e, più raramente, una mielopatia trasversa. L'ictus può colpire pazienti di qualsiasi età, anche molto giovani. È fondamentale sospettare un'APS in un paziente giovane con ictus criptogenico o in chiunque presenti una trombosi in sedi atipiche. \n\nLa gestione della prevenzione secondaria dello stroke in un paziente con APS è molto specifica. A differenza della maggior parte delle altre eziologie di ictus, la terapia antiaggregante è considerata insufficiente nei pazienti ad alto rischio. I trial clinici hanno dimostrato che la terapia anticoagulante con Warfarin, mantenendo un INR tra 2.0 e 3.0, è il trattamento di scelta per prevenire le recidive trombotiche arteriose. È importante sottolineare che i DOAC (Anticoagulanti Orali Diretti) non sono indicati nei pazienti con APS, specialmente nei triplo positivi, in quanto studi hanno mostrato un rischio di recidiva trombotica superiore rispetto al Warfarin. La gestione di questi pazienti, quindi, rappresenta un'eccezione importante alle linee guida standard di prevenzione dello stroke.",
        "difficulty": 3,
        "id": 24
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi illustri le peculiarità dello stroke in gravidanza e nel post-partum.",
        "answer": "L'ictus in gravidanza e nel puerperio è un evento raro ma devastante, con un'incidenza che raggiunge il suo picco nel terzo trimestre e, soprattutto, nelle sei settimane successive al parto. La gravidanza stessa induce uno stato di ipercoagulabilità fisiologica, che aumenta il rischio trombotico. \n\nLe eziologie sono diverse da quelle della popolazione generale. Una delle cause più specifiche è la pre-eclampsia/eclampsia, una sindrome ipertensiva multisistemica che può complicarsi con una sindrome da encefalopatia posteriore reversibile (PRES), emorragia o infarto cerebrale. Altre cause includono l'angiopatia cerebrale post-partum, che è una forma di RCVS; la cardiomiopatia peripartum, che può causare cardioembolismo; le dissezioni arteriose e la trombosi dei seni venosi cerebrali. \n\nLa gestione acuta è una sfida che richiede un approccio multidisciplinare. L'imaging diagnostico di scelta è la Risonanza Magnetica senza contrasto per evitare radiazioni ionizzanti. Per quanto riguarda le terapie di rivascolarizzazione, la trombolisi endovenosa non è controindicata in assoluto ma va ponderata attentamente per il rischio emorragico materno e placentare. La trombectomia meccanica è considerata più sicura e preferibile in caso di occlusione di un grosso vaso. In entrambi i casi è fondamentale un attento monitoraggio materno-fetale. \n\nPer la prevenzione secondaria, la scelta del farmaco antitrombotico dipende dalla causa e dal timing. Il Warfarin è teratogeno nel primo trimestre, pertanto le pazienti che necessitano di anticoagulazione, come quelle con protesi valvolari meccaniche o APS, vengono trattate con eparina a basso peso molecolare. L'aspirina è considerata sicura durante tutta la gravidanza. I DOAC sono controindicati. Dopo il parto, si può riprendere la terapia anticoagulante più appropriata, tenendo presente che Warfarin e LMWH sono compatibili con l'allattamento, a differenza dei DOAC.",
        "difficulty": 3,
        "id": 25
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi descriva le principali sindromi alterne del tronco encefalico.",
        "answer": "Certamente. Le sindromi alterne sono sindromi neurologiche classiche causate da una lesione unilaterale del tronco encefalico, tipicamente un ictus ischemico. Sono definite 'alterne' perché combinano il deficit di uno o più nervi cranici omolaterali alla lesione, a causa del coinvolgimento del loro nucleo o del loro fascio intra-assiale, con un deficit delle vie lunghe motorie o sensitive (come il fascio piramidale o il lemnisco mediale) che è controlaterale alla lesione, poiché queste vie non hanno ancora decussato o hanno già decussato a un livello più caudale. \n\nPossiamo localizzarle in base ai nervi cranici coinvolti. A livello del mesencefalo, abbiamo la Sindrome di Weber, che è una sindrome anteriore o ventrale. Coinvolge il peduncolo cerebrale e le fibre del terzo nervo cranico, causando un'emiparesi controlaterale associata a una paralisi dell'oculomotore omolaterale, quindi con ptosi, midriasi e l'occhio deviato 'in basso e in fuori'. Più posteriormente, la Sindrome di Benedikt coinvolge il nucleo rosso oltre al III nervo cranico, determinando una paralisi del III nervo omolaterale associata a un tremore o a movimenti coreo-atetosici controlaterali. \n\nA livello del ponte, la Sindrome di Millard-Gubler è una sindrome ventrale che coinvolge il VI e VII nervo cranico e il fascio piramidale, causando una paralisi del nervo abducente e faciale periferico omolaterali, con un'emiplegia controlaterale che risparmia il volto. \n\nA livello del bulbo, la sindrome più classica e complessa è la Sindrome di Wallenberg, o sindrome bulbare laterale, tipicamente da occlusione dell'arteria cerebellare postero-inferiore (PICA). Causa una costellazione di segni: omolateralmente, una sindrome di Horner, atassia, e deficit dei nervi IX e X con disfagia e disfonia, e un'ipoestesia termo-dolorifica del volto. Controlateralmente, invece, un'ipoestesia termo-dolorifica del corpo. Associati a questi vi sono vertigini e nistagmo per il coinvolgimento dei nuclei vestibolari.",
        "difficulty": 2,
        "id": 26
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Quali sono le principali peculiarità dell'ictus pediatrico?",
        "answer": "L'ictus pediatrico è un'entità distinta da quello dell'adulto per epidemiologia, eziologia, clinica e prognosi. Pur essendo raro, rappresenta una delle prime dieci cause di morte in età infantile. \n\nDal punto di vista epidemiologico, la proporzione tra ictus ischemico ed emorragico è quasi paritaria, circa 50-50, a differenza dell'adulto dove l'ischemia predomina nettamente (80-20). Il periodo a maggior rischio in assoluto è il primo mese di vita. \n\nL'eziologia è molto diversa. Mentre nell'adulto domina l'aterosclerosi, nel bambino le cause principali sono le arteriopatie non aterosclerotiche e le cardiopatie. Tra le arteriopatie, la 'Focal Cerebral Arteriopathy' (FCA), una vasculopatia infiammatoria transitoria di un singolo vaso, la malattia di Moyamoya e le dissezioni arteriose sono le più comuni. Le cardiopatie congenite sono un'altra causa fondamentale, sia per meccanismi di cardioembolismo che di ipoperfusione. Altre cause importanti sono le malattie ematologiche, come l'anemia a cellule falciformi, e le infezioni, come la vasculopatia post-varicella. \n\nAnche la presentazione clinica è differente e spesso subdola. Le crisi epilettiche focali sono un sintomo d'esordio molto più frequente rispetto all'adulto e possono essere l'unica manifestazione, soprattutto nei neonati. Altri sintomi aspecifici possono includere irritabilità, letargia o inappetenza. I deficit focali classici possono essere meno evidenti. \n\nInfine, la prognosi è condizionata da due forze opposte: da un lato, l'elevata plasticità cerebrale del bambino permette un recupero funzionale spesso sorprendente. Dall'altro, un danno cerebrale precoce può interferire con lo sviluppo, portando alla comparsa a lungo termine di deficit cognitivi, comportamentali, epilessia o paralisi cerebrale, anche a fronte di un buon recupero motorio iniziale.",
        "difficulty": 2,
        "id": 27
    },
    {
        "category": "PATOLOGIE CEREBROVASCOLARI",
        "question": "Mi parli della Malattia di Fabry e della sindrome MELAS come cause rare di stroke.",
        "answer": "La malattia di Fabry e la MELAS sono due importanti malattie genetiche rare che possono manifestarsi con un ictus, specialmente in pazienti giovani. \n\nLa Malattia di Fabry è una malattia da accumulo lisosomiale a trasmissione X-linked, causata da un deficit dell'enzima alfa-galattosidasi A. Questo porta all'accumulo di globotriaosilceramide (Gb3) nelle cellule di vari organi, inclusa la parete dei vasi sanguigni. Clinicamente, nei maschi l'esordio è in età infantile con le tipiche acroparestesie (dolori urenti a mani e piedi), ipoidrosi e angiocheratomi cutanei. Con il tempo si sviluppa un coinvolgimento renale, cardiaco e cerebrale. L'ictus nella Fabry può avere una genesi multifattoriale: una vasculopatia dei piccoli vasi, un'accelerata aterosclerosi, e un cardioembolismo dovuto ad aritmie o a cardiomiopatia ipertrofica. Caratteristica è la dolicoectasia vertebro-basilare. La diagnosi si basa sul dosaggio dell'attività enzimatica e sul test genetico. È fondamentale riconoscerla perché è disponibile una terapia enzimatica sostitutiva. \n\nLa sindrome MELAS, invece, è una malattia mitocondriale. L'acronimo sta per Mitochondrial Encephalomyopathy, Lactic Acidosis and Stroke-like episodes. È causata da mutazioni del DNA mitocondriale e quindi ha un'ereditarietà materna. L'esordio avviene tipicamente tra i 2 e i 40 anni. La clinica è dominata da miopatia, ipoacusia, diabete, bassa statura, ma il sintomo cardine sono gli 'stroke-like episodes': eventi neurologici acuti con deficit focali, crisi e cefalea, le cui lesioni alla risonanza magnetica non rispettano i territori vascolari classici, interessando prevalentemente la corteccia delle regioni posteriori. Un elemento diagnostico chiave è l'aumento dei lattati nel siero e nel liquor. La terapia per gli episodi acuti si basa sulla somministrazione di L-Arginina.",
        "difficulty": 3,
        "id": 28
    },
    {
        "category": "NEUROIMMUNOLOGIA",
        "question": "Mi dia un inquadramento generale delle encefaliti autoimmuni, con particolare riferimento alla classificazione patogenetica.",
        "answer": "Certamente. Le encefaliti autoimmuni sono un gruppo di encefalopatie infiammatorie, tipicamente ad esordio subacuto, caratterizzate da un'associazione di deficit cognitivi, sintomi psichiatrici, alterazione dello stato di coscienza e crisi epilettiche. L'elemento chiave per la loro comprensione è la classificazione basata sulla localizzazione dell'antigene bersaglio della risposta immunitaria, che ha profonde implicazioni prognostiche e terapeutiche. \n\nPossiamo distinguerle in due grandi categorie. \n\nLa prima è quella delle encefaliti con anticorpi diretti contro antigeni della superficie cellulare o sinaptici, come i recettori NMDA, i canali LGI1 o i recettori GABA. In questi casi, gli anticorpi stessi hanno un ruolo patogenetico diretto, alterando la funzione neuronale. Queste forme sono spesso meno associate a neoplasie e, cosa fondamentale, rispondono bene all'immunoterapia, poiché la rimozione degli anticorpi dal circolo e dal liquor può ripristinare la funzione sinaptica. \n\nLa seconda categoria è quella delle encefaliti associate ad anticorpi contro antigeni intracellulari, citoplasmatici o nucleari. Questi sono gli anticorpi onconeurali classici, come Anti-Hu, Anti-Yo o Anti-Ma2. Queste sono considerate le vere sindromi paraneoplastiche, con una fortissima associazione a un tumore sottostante (es. microcitoma polmonare o tumore del testicolo). In questi casi, il danno neuronale è mediato principalmente dai linfociti T citotossici, che riconoscono l'antigene comune tra tumore e neurone. Gli anticorpi sono quindi un biomarker di questa risposta T-cellulare, ma non i principali effettori del danno. Questo spiega perché queste forme hanno una prognosi peggiore e rispondono meno all'immunoterapia, rendendo prioritaria l'identificazione e la rimozione del tumore.",
        "difficulty": 2,
        "id": 29
    },
    {
        "category": "NEUROIMMUNOLOGIA",
        "question": "Come si imposta l'iter diagnostico in un paziente con sospetta encefalite autoimmune secondo i criteri di Graus?",
        "answer": "L'approccio diagnostico a un paziente con sospetta encefalite autoimmune segue un percorso a step, come formalizzato dai criteri di Graus del 2016. L'obiettivo è arrivare a una diagnosi di probabilità anche in assenza dei test anticorpali, per avviare tempestivamente la terapia. \n\nIl primo livello è quello di 'Encefalite Autoimmune Possibile'. La diagnosi richiede un esordio subacuto, entro 3 mesi, di sintomi come deficit di memoria, alterato stato mentale o sintomi psichiatrici, associati ad almeno un reperto tra nuovi segni focali, crisi epilettiche, pleiocitosi liquorale o RM suggestiva. È mandatoria l'esclusione di altre cause più probabili. Questo livello di sospetto è sufficiente per avviare le indagini di secondo livello. \n\nSi passa poi a definire sindromi più specifiche. Un esempio è l' 'Encefalite Limbica Definita', che richiede, oltre all'esordio subacuto di sintomi limbici (memoria, crisi, psichiatrici), un quadro RM quasi patognomonico con iperintensità in T2/FLAIR ristretta bilateralmente ai lobi temporali mediali. Questo deve associarsi a pleiocitosi liquorale o ad anomalie EEG temporali. \n\nIl ruolo degli autoanticorpi è cruciale. La loro identificazione permette di definire con certezza una sindrome specifica, ad esempio 'Encefalite da anticorpi anti-NMDAR Definita', anche in presenza di una clinica atipica o parziale. D'altra parte, è importante ricordare che si può porre diagnosi di 'Encefalite autoimmune probabile, anticorpo-negativa' in pazienti con clinica compatibile, assenza di anticorpi noti, ma forte evidenza di flogosi alla RM o nel liquor (bande oligoclonali, IgG index elevato) o alla biopsia, dopo aver escluso tutte le altre possibili cause.",
        "difficulty": 2,
        "id": 30
    },
    {
        "category": "NEUROIMMUNOLOGIA",
        "question": "Mi parli dell'encefalite da anticorpi anti-recettore NMDA.",
        "answer": "L'encefalite anti-NMDAR è una delle forme più comuni di encefalite autoimmune, superando l'encefalite erpetica nei pazienti giovani. Colpisce prevalentemente donne giovani ed è frequentemente associata, nel 30-50% dei casi, a un teratoma ovarico. \n\nLa presentazione clinica è spesso caratteristica e multi-fasica. Tipicamente esordisce con un prodromo simil-influenzale, seguito da una fase psichiatrica prominente con psicosi, deliri, allucinazioni e alterazioni del comportamento. A questa segue una fase neurologica in cui compaiono crisi epilettiche e disturbi del movimento, in particolare discinesie ipercinetiche orofacciali o degli arti. Infine, evolve verso una fase di grave disfunzione autonomica, con instabilità cardiovascolare, ipoventilazione centrale e una progressiva riduzione dello stato di coscienza, che può arrivare al coma. \n\nLa diagnosi può essere difficile all'inizio, poiché la risonanza magnetica cerebrale è normale in oltre il 50% dei casi. Gli strumenti chiave sono l'analisi del liquor, che quasi sempre mostra una pleiocitosi linfocitaria, e la ricerca degli anticorpi anti-recettore NMDA, che è più sensibile sul liquor che sul siero. L'EEG è spesso alterato e può mostrare un pattern specifico chiamato 'extreme delta brush'. \n\nUna volta posta la diagnosi, è mandatorio uno screening per il teratoma, la cui rimozione è parte integrante della terapia. Il trattamento si basa su un'immunoterapia aggressiva, con farmaci di prima linea come steroidi, immunoglobuline e plasmaferesi, seguiti da terapie di seconda linea come rituximab o ciclofosfamide nei casi refrattari. La prognosi è generalmente buona se la diagnosi è tempestiva e il trattamento adeguato.",
        "difficulty": 2,
        "id": 31
    },
    {
        "category": "NEUROIMMUNOLOGIA",
        "question": "Quali sono le caratteristiche delle encefaliti da anticorpi anti-LGI1 e anti-CASPR2?",
        "answer": "Le encefaliti da anticorpi anti-LGI1 e anti-CASPR2 sono due forme di encefalite autoimmune dirette contro componenti del complesso dei canali del potassio voltaggio-dipendenti (VGKC). Colpiscono tipicamente uomini di età medio-avanzata e, pur avendo delle sovrapposizioni, presentano quadri clinici abbastanza distinti.\n\nL'encefalite anti-LGI1 è la forma più comune e si manifesta classicamente come un'encefalite limbica con deficit di memoria a breve termine e crisi epilettiche temporali. Il sintomo quasi patognomonico sono le 'crisi distoniche facio-brachiali', brevi e frequentissime contrazioni del volto e del braccio omolaterali, che spesso precedono di settimane o mesi l'insorgenza dei sintomi cognitivi. È inoltre caratteristica l'associazione con l'iponatriemia. Un dato importante è che il liquor può essere normale, senza pleiocitosi, e gli anticorpi si trovano più facilmente nel siero.\n\nL'encefalite anti-CASPR2 presenta un quadro più complesso e multiforme, che spesso include, oltre all'encefalite limbica, un coinvolgimento del sistema nervoso periferico, noto come neuromiotonia, con fascicolazioni, rigidità e crampi dolorosi. La combinazione di encefalopatia, neuromiotonia e disautonomia severa configura la 'Sindrome di Morvan'. L'associazione con il timoma è più frequente rispetto alla LGI1. \n\nEntrambe le forme rispondono molto bene all'immunoterapia, in particolare ai corticosteroidi e alle immunoglobuline. Riconoscere questi fenotipi clinici specifici è fondamentale per guidare la ricerca anticorpale e avviare precocemente la terapia corretta.",
        "difficulty": 3,
        "id": 32
    },
    {
        "category": "NEUROIMMUNOLOGIA",
        "question": "Mi dia un inquadramento delle sindromi neurologiche paraneoplastiche (PNS) e delle principali manifestazioni cliniche.",
        "answer": "Certamente. Le sindromi neurologiche paraneoplastiche sono un gruppo eterogeneo di disturbi neurologici non causati da effetti diretti del tumore, come metastasi o compressione, ma da una risposta immunitaria cross-reattiva. Il sistema immunitario, nel tentativo di attaccare il tumore che esprime proteine 'onconeurali', finisce per attaccare anche il sistema nervoso che esprime fisiologicamente le stesse proteine. Queste sindromi possono precedere di mesi o anni la diagnosi del tumore. \n\nLe manifestazioni cliniche sono varie e possono colpire qualsiasi parte del sistema nervoso. Tra i quadri più classici del sistema nervoso centrale troviamo: \n\n1.  La degenerazione cerebellare subacuta: un'atassia pancerebellare severa e rapidamente progressiva, che porta a grave disabilità in poche settimane. È classicamente associata agli anticorpi Anti-Yo nei tumori ginecologici e mammari, e agli anticorpi Anti-Tr nel linfoma di Hodgkin. \n\n2.  Le encefaliti paraneoplastiche: possono presentarsi come un'encefalite limbica, con crisi epilettiche e disturbi di memoria, o come un'encefalite del tronco encefalico. Tra gli anticorpi più noti ci sono l'Anti-Hu, associato al microcitoma polmonare e a un'encefalomielite diffusa, e l'Anti-Ma2, associato a tumori testicolari e a un'encefalite del tronco e diencefalica. \n\n3.  La sindrome opsoclono-mioclono: una combinazione di movimenti oculari caotici e multidirezionali (opsoclono) e scosse miocloniche del tronco e degli arti. Negli adulti, è spesso associata all'anticorpo Anti-Ri e a tumori mammari o polmonari. \n\n4.  La Stiff-Person Syndrome: caratterizzata da rigidità assiale e degli arti con spasmi dolorosi. È frequentemente associata ad anticorpi Anti-Amfifisina in un contesto paraneoplastico. \n\nIl trattamento di queste sindromi è duplice: è prioritaria la terapia del tumore sottostante, associata a un'immunoterapia, sebbene la risposta a quest'ultima sia spesso parziale, specialmente nelle forme mediate da anticorpi intracellulari.",
        "difficulty": 2,
        "id": 33
    },
    {
        "category": "NEUROIMMUNOLOGIA",
        "question": "Qual è l'approccio terapeutico generale alle encefaliti autoimmuni?",
        "answer": "L'approccio terapeutico alle encefaliti autoimmuni deve essere tempestivo e aggressivo, poiché l'outcome del paziente è strettamente legato alla precocità del trattamento. La strategia si articola in terapie di prima e seconda linea, e talvolta in una terapia di mantenimento. \n\nLe terapie di prima linea hanno l'obiettivo di rimuovere rapidamente gli autoanticorpi e di smorzare la risposta infiammatoria acuta. Includono i corticosteroidi ad alte dosi per via endovenosa (tipicamente metilprednisolone 1 grammo al giorno per 3-5 giorni), le immunoglobuline endovena (IVIg) al dosaggio di 2 grammi per chilo suddivisi in 2-5 giorni, e la plasmaferesi (PEX). Spesso si utilizzano terapie combinate, come steroidi più IVIg o PEX, per massimizzare l'efficacia. Nelle forme paraneoplastiche, la rimozione del tumore è considerata una terapia di prima linea e deve essere eseguita il prima possibile. \n\nSe non si osserva un miglioramento significativo entro circa due settimane, si passa alle terapie di seconda linea. Queste mirano a un'immunosoppressione più profonda e duratura. I farmaci più utilizzati sono il Rituximab, un anticorpo monoclonale anti-CD20 che deprime i linfociti B, e la Ciclofosfamide, un agente alchilante. Il Rituximab è spesso preferito per il suo miglior profilo di tollerabilità. \n\nInfine, nei pazienti che hanno risposto bene ma che sono ad alto rischio di ricaduta, o che presentano recidive, si può considerare una terapia di mantenimento a lungo termine. Le opzioni includono somministrazioni periodiche di Rituximab, IVIg mensili, oppure immunosoppressori orali come l'azatioprina o il micofenolato mofetile, sebbene il consenso su questa strategia non sia ancora definitivo.",
        "difficulty": 2,
        "id": 34
    },
    {
        "category": "NEUROIMMUNOLOGIA",
        "question": "Mi parli dell'inquadramento e della diagnosi differenziale delle encefaliti virali.",
        "answer": "L'encefalite virale è un'infiammazione del parenchima cerebrale causata da un'infezione virale diretta. La presentazione clinica è tipicamente acuta ed è caratterizzata dalla triade di febbre, cefalea ed encefalopatia, quest'ultima manifesta con alterazione dello stato di coscienza, confusione, cambiamenti comportamentali o crisi epilettiche. Spesso sono presenti segni meningei e deficit neurologici focali. \n\nL'agente eziologico più importante da riconoscere è l'Herpes Simplex Virus di tipo 1 (HSV-1), poiché è la causa più comune di encefalite sporadica grave ed esiste una terapia specifica efficace, l'Aciclovir. Altri virus importanti includono il Varicella Zoster Virus (VZV), specialmente negli immunocompromessi, e gli arbovirus, come il West Nile Virus, trasmessi da punture di zanzara. \n\nL'iter diagnostico in urgenza prevede un neuroimaging e una rachicentesi. La Risonanza Magnetica cerebrale è l'esame di scelta e può mostrare alterazioni tipiche: nell'encefalite erpetica, ad esempio, si osservano iperintensità T2/FLAIR, spesso con componente emorragica e restrittiva in DWI, a carico di uno o entrambi i lobi temporali e delle strutture limbiche. L'esame del liquido cefalorachidiano è fondamentale: mostra una pleiocitosi linfocitaria, solitamente nell'ordine di decine o centinaia di cellule, iperproteinorrachia e glicorrachia normale. La diagnosi eziologica di certezza si ottiene con la reazione a catena della polimerasi (PCR) sul liquor, che permette di identificare il DNA del virus. \n\nData la gravità della patologia, la terapia antivirale, in particolare con Aciclovir endovena, deve essere iniziata empiricamente in tutti i casi di sospetta encefalite, senza attendere il risultato della PCR, per coprire la possibile infezione da HSV.",
        "difficulty": 1,
        "id": 35
    },
    {
        "category": "NEUROIMMUNOLOGIA",
        "question": "Quali sono le caratteristiche cliniche e diagnostiche della malattia da anticorpi anti-IgLON5?",
        "answer": "La malattia da anticorpi anti-IgLON5 è un'entità nosologica rara e complessa, a cavallo tra le encefaliti autoimmuni e le malattie neurodegenerative. È causata da anticorpi contro la proteina di adesione neuronale IgLON5 ma, a differenza di altre forme, è associata a depositi di proteina tau iperfosforilata, suggerendo un meccanismo patogenetico duale, sia infiammatorio che degenerativo.\n\nLa presentazione clinica è tipicamente insidiosa e cronico-progressiva, e si caratterizza per una combinazione unica e peculiare di sintomi. Il sintomo più frequente e caratteristico è un grave disturbo del sonno, che include parasonnie del sonno REM e NREM, apnea ostruttiva e stridore notturno. A questo si associa una disfunzione bulbare, con disfagia e disartria, e un disturbo del movimento, con instabilità posturale, corea e parkinsonismo. Frequente è anche la disfunzione autonomica. Questa combinazione di sintomi può mimare altre patologie neurodegenerative come la Paralisi Sopranucleare Progressiva (PSP) o l'Atrofia Multisistemica (MSA). \n\nLa diagnosi si basa sulla ricerca degli anticorpi anti-IgLON5, che sono quasi sempre presenti nel liquor e spesso anche nel siero. Altri esami strumentali sono meno specifici: il liquor può essere normale, così come la risonanza magnetica cerebrale. La polisonnografia è un esame cruciale per documentare i disturbi del sonno. La risposta all'immunoterapia è variabile e spesso solo parziale, e la prognosi è gravata da un significativo rischio di morte improvvisa, verosimilmente per l'insufficienza respiratoria o autonomica centrale.",
        "difficulty": 3,
        "id": 36
    }

        
];
        // Variabili globali
        let allFlashcards = [...flashcardsData];
        let currentDeck = [...flashcardsData];
        let currentCardIndex = 0;
        let isFlipped = false;
        let cardsStudied = 0;
        let correctAnswers = 0;
        let currentStreak = 0;
        let sessionStats = {
            easy: 0,
            medium: 0,
            hard: 0
        };
        let selectedCategories = new Set();
        let studyHistory = {};
        let editingCardIndex = null;

        // Inizializzazione
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedProgress();
            initializeCategories();
            updateStats();
            showCurrentCard();
            updateProgress();
        });

        // Inizializza categorie
        function initializeCategories() {
            const categories = [...new Set(allFlashcards.map(card => card.category))];
            const categoryList = document.getElementById('categoryList');
            
            categoryList.innerHTML = categories.map(category => `
                <div class="category-item">
                    <input type="checkbox" id="cat-${category}" value="${category}" checked>
                    <label for="cat-${category}" style="cursor: pointer; flex: 1;">
                        ${category} (${allFlashcards.filter(card => card.category === category).length} carte)
                    </label>
                </div>
            `).join('');
            
            // Seleziona tutte le categorie di default
            categories.forEach(cat => selectedCategories.add(cat));
        }

        // Mostra carta corrente
        function showCurrentCard() {
            const container = document.getElementById('flashcardContainer');
            if (currentCardIndex >= currentDeck.length) {
                showSessionComplete();
                return;
            }

            const card = currentDeck[currentCardIndex];
            container.innerHTML = `
                <div class="flashcard" id="currentFlashcard" onclick="flipCard(event)">
                    <button class="edit-btn" onclick="openEditModal(event)">✏️ Modifica</button>
                    <div class="category-badge">${card.category}</div>
                    <div class="flashcard-front">
                        <h2 style="color: #a5b4fc; margin-bottom: 15px;">❓ Domanda Orale</h2>
                        <p>${card.question}</p>
                    </div>
                    <div class="flashcard-back">
                       <h2 style="color: #a5b4fc; margin-bottom: 15px;">🎯 Risposta Modello</h2>
                        <p>${card.answer}</p>
                        <div class="difficulty-buttons">
                           <button class="difficulty-btn easy" onclick="markDifficulty('easy', event)">
                      🎯 Risposta Perfetta
                     </button>
                     <button class="difficulty-btn medium" onclick="markDifficulty('medium', event)">
                     👍 Risposta Buona
                     </button>
                     <button class="difficulty-btn hard" onclick="markDifficulty('hard', event)">
                         📚 Da Ripassare
                     </button>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('currentCard').textContent = currentCardIndex + 1;
            document.getElementById('totalCards').textContent = currentDeck.length;
            isFlipped = false;
        }

        // Flip carta
        function flipCard(event) {
            if (event.target.classList.contains('edit-btn')) return;
            const flashcard = document.getElementById('currentFlashcard');
            flashcard.classList.toggle('flipped');
            isFlipped = !isFlipped;
        }

        // Segna difficoltà
        function markDifficulty(difficulty, event) {
            event.stopPropagation();
            
            const card = currentDeck[currentCardIndex];
            
            // Aggiorna statistiche
            sessionStats[difficulty]++;
            cardsStudied++;
            
            // Salva nella storia
            if (!studyHistory[card.id]) {
                studyHistory[card.id] = {
                    studied: 0,
                    correct: 0,
                    lastStudied: null,
                    difficulty: 'medium'
                };
            }
            
            studyHistory[card.id].studied++;
            studyHistory[card.id].lastStudied = new Date().toISOString();
            studyHistory[card.id].difficulty = difficulty;
            
            if (difficulty === 'easy') {
                correctAnswers++;
                currentStreak++;
                studyHistory[card.id].correct++;
                showToast('🎯 Risposta eccellente!', 'success');
            } else if (difficulty === 'medium') {
                currentStreak = Math.floor(currentStreak / 2);
                showToast('👍 Buona esposizione!', 'success');
            } else {
                currentStreak = 0;
                showToast('📚 Rivedere la risposta!', 'success');
                // Aggiungi carta difficile alla fine
                currentDeck.push({...card});
            }

            // Salva progresso (solo in memoria se localStorage non disponibile)
            saveProgressToLocalStorage();
            
            // Passa alla prossima carta
            setTimeout(() => {
                currentCardIndex++;
                updateStats();
                updateProgress();
                showCurrentCard();
            }, 1000);
        }

        // Mostra toast notification
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} show`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Aggiorna statistiche
        function updateStats() {
            document.getElementById('cardsStudied').textContent = cardsStudied;
            document.getElementById('correctAnswers').textContent = correctAnswers;
            document.getElementById('streak').textContent = currentStreak;
            
            // Calcola progresso totale basato su carte uniche studiate
            const totalCardsInSystem = allFlashcards.length;
            const uniqueCardsStudied = Object.keys(studyHistory).length;
            const totalProgress = totalCardsInSystem > 0 ? Math.round((uniqueCardsStudied / totalCardsInSystem) * 100) : 0;
            document.getElementById('totalProgress').textContent = totalProgress + '%';
        }

        // Aggiorna barra di progresso
        function updateProgress() {
            const progress = currentDeck.length > 0 ? (currentCardIndex / currentDeck.length) * 100 : 0;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // Gestione categorie
        function openCategoryModal() {
            document.getElementById('categoryModal').style.display = 'block';
        }

        function closeCategoryModal() {
            document.getElementById('categoryModal').style.display = 'none';
        }

        function selectAllCategories() {
            const checkboxes = document.querySelectorAll('#categoryList input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = true);
        }

        function deselectAllCategories() {
            const checkboxes = document.querySelectorAll('#categoryList input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = false);
        }

        function applyCategoryFilter() {
            selectedCategories.clear();
            const checkboxes = document.querySelectorAll('#categoryList input[type="checkbox"]:checked');
            
            checkboxes.forEach(cb => {
                selectedCategories.add(cb.value);
            });
            
            if (selectedCategories.size === 0) {
                showToast('Seleziona almeno una categoria!', 'error');
                return;
            }
            
            // Filtra il deck
            currentDeck = allFlashcards.filter(card => selectedCategories.has(card.category));
            currentCardIndex = 0;
            
            closeCategoryModal();
            showCurrentCard();
            updateProgress();
            showToast(`${currentDeck.length} carte selezionate`, 'success');
        }

        // Modifica carta
        function openEditModal(event) {
            event.stopPropagation();
            editingCardIndex = currentCardIndex;
            const card = currentDeck[currentCardIndex];
            
            document.getElementById('editCategory').value = card.category;
            document.getElementById('editQuestion').value = card.question;
            document.getElementById('editAnswer').value = card.answer;
            
            document.getElementById('editModal').style.display = 'block';
        }

        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
            editingCardIndex = null;
        }

        function saveCardEdits() {
            if (editingCardIndex === null) return;
            
            const card = currentDeck[editingCardIndex];
            const newCategory = document.getElementById('editCategory').value.trim();
            const newQuestion = document.getElementById('editQuestion').value.trim();
            const newAnswer = document.getElementById('editAnswer').value.trim();
            
            if (!newCategory || !newQuestion || !newAnswer) {
                showToast('Tutti i campi sono obbligatori!', 'error');
                return;
            }
            
            // Aggiorna carta nel deck corrente
            card.category = newCategory;
            card.question = newQuestion;
            card.answer = newAnswer;
            
            // Aggiorna anche nel database principale
            const originalCard = allFlashcards.find(c => c.id === card.id);
            if (originalCard) {
                originalCard.category = newCategory;
                originalCard.question = newQuestion;
                originalCard.answer = newAnswer;
            }
            
            // Salva modifiche (solo in memoria se localStorage non disponibile)
            saveProgressToLocalStorage();
            
            closeEditModal();
            showCurrentCard();
            showToast('Carta modificata con successo!', 'success');
        }

        // Gestione Aggiunta Nuova Carta
        function openAddCardModal() {
            // Pulisci i campi del form
            document.getElementById('addCardCategory').value = '';
            document.getElementById('addCardQuestion').value = '';
            document.getElementById('addCardAnswer').value = '';
            document.getElementById('addCardModal').style.display = 'block';
            document.getElementById('addCardCategory').focus();
        }

        function closeAddCardModal() {
            document.getElementById('addCardModal').style.display = 'none';
        }

        function addNewCard() {
            const category = document.getElementById('addCardCategory').value.trim();
            const question = document.getElementById('addCardQuestion').value.trim();
            const answer = document.getElementById('addCardAnswer').value.trim();

            if (!category || !question || !answer) {
                showToast('Tutti i campi sono obbligatori!', 'error');
                return;
            }

            // Trova il massimo ID esistente e incrementa
            const newId = allFlashcards.length > 0 ? Math.max(...allFlashcards.map(c => c.id || 0)) + 1 : 1;
            
            const newCard = {
                category: category,
                question: question,
                answer: answer,
                difficulty: 1,
                id: newId 
            };

            allFlashcards.push(newCard);
            
            // Aggiorna le categorie nel modale di selezione
            initializeCategories();

            // Se la categoria della nuova carta è tra quelle selezionate, aggiungila al deck corrente
            if (selectedCategories.has(category)) {
                if (!currentDeck.find(card => card.id === newCard.id)) {
                    currentDeck.push(newCard);
                    document.getElementById('totalCards').textContent = currentDeck.length;
                }
            }
            
            saveProgressToLocalStorage();
            showToast('Nuova carta aggiunta con successo!', 'success');
            closeAddCardModal();

            // Se era l'unica carta e ha completato la sessione
            if (document.getElementById('sessionComplete').style.display !== 'none' && currentDeck.length === 1) {
                currentCardIndex = 0;
                document.getElementById('sessionComplete').style.display = 'none';
                document.getElementById('flashcardContainer').style.display = 'block';
                showCurrentCard();
                updateProgress();
            }
        }

        // Salva/Carica progresso
        function saveProgressToLocalStorage() {
            const saveData = {
                studyHistory: studyHistory,
                sessionStats: sessionStats,
                cardsStudied: cardsStudied,
                correctAnswers: correctAnswers,
                currentStreak: currentStreak,
                flashcardsData: allFlashcards,
                selectedCategories: Array.from(selectedCategories),
                savedDate: new Date().toISOString()
            };
            
            try {
                localStorage.setItem('neuroCardsProgress', JSON.stringify(saveData));
            } catch (e) {
                // localStorage non disponibile in modalità sandbox
                console.log('localStorage non disponibile, utilizzando salvataggio in memoria');
            }
        }

        function saveProgress() {
            // Prima prova a salvare in localStorage se disponibile
            saveProgressToLocalStorage();
            
            // Crea sempre file di backup scaricabile
            const saveData = {
                studyHistory: studyHistory,
                sessionStats: sessionStats,
                cardsStudied: cardsStudied,
                correctAnswers: correctAnswers,
                currentStreak: currentStreak,
                flashcardsData: allFlashcards,
                selectedCategories: Array.from(selectedCategories),
                savedDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(saveData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `neurocards-progress-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            // Cleanup
            setTimeout(() => URL.revokeObjectURL(url), 100);
            
            showToast('Progresso salvato! File scaricato.', 'success');
        }

        function loadProgress() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'application/json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    try {
                        const data = JSON.parse(event.target.result);
                        
                        studyHistory = data.studyHistory || {};
                        sessionStats = data.sessionStats || {easy: 0, medium: 0, hard: 0};
                        cardsStudied = data.cardsStudied || 0;
                        correctAnswers = data.correctAnswers || 0;
                        currentStreak = data.currentStreak || 0;
                        
                        if (data.flashcardsData) {
                            allFlashcards = data.flashcardsData;
                            currentDeck = [...allFlashcards];
                        }
                        
                        if (data.selectedCategories) {
                            selectedCategories = new Set(data.selectedCategories);
                        }
                        
                        currentCardIndex = 0;
                        initializeCategories();
                        updateStats();
                        showCurrentCard();
                        updateProgress();
                        
                        showToast('Progresso caricato con successo!', 'success');
                    } catch (error) {
                        showToast('Errore nel caricamento del file!', 'error');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }

        function loadSavedProgress() {
            try {
                const saved = localStorage.getItem('neuroCardsProgress');
                if (saved) {
                    const data = JSON.parse(saved);
                    studyHistory = data.studyHistory || {};
                    // Non caricare automaticamente le statistiche di sessione
                    // per permettere una nuova sessione pulita
                }
            } catch (error) {
                console.log('localStorage non disponibile, progresso non caricato');
                // Il progresso rimarrà solo in memoria durante la sessione
            }
        }

        // Altre funzioni utility
        function shuffleCards() {
            for (let i = currentDeck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [currentDeck[i], currentDeck[j]] = [currentDeck[j], currentDeck[i]];
            }
            currentCardIndex = 0;
            showCurrentCard();
            updateProgress();
            showToast('Carte mescolate!', 'success');
        }

        function resetProgress() {
            if (confirm('Sei sicuro di voler cancellare TUTTO il progresso di studio salvato? Questa azione non può essere annullata.')) {
                // Resetta tutto il progresso
                studyHistory = {};
                cardsStudied = 0;
                correctAnswers = 0;
                currentStreak = 0;
                sessionStats = { easy: 0, medium: 0, hard: 0 };
                
                // Rimuovi dal localStorage
                try {
                    localStorage.removeItem('neuroCardsProgress');
                } catch (e) {
                    console.log('localStorage non disponibile');
                }
                
                // Aggiorna la visualizzazione
                updateStats();
                showToast('Tutto il progresso è stato cancellato!', 'success');
            }
        }

        function resetSession() {
            if (confirm('Sei sicuro di voler resettare la sessione? Il progresso salvato non verrà perso.')) {
                currentCardIndex = 0;
                cardsStudied = 0;
                correctAnswers = 0;
                currentStreak = 0;
                sessionStats = { easy: 0, medium: 0, hard: 0 };
                currentDeck = allFlashcards.filter(card => selectedCategories.has(card.category));
                
                document.getElementById('sessionComplete').style.display = 'none';
                document.getElementById('flashcardContainer').style.display = 'block';
                
                updateStats();
                updateProgress();
                showCurrentCard();
                showToast('Sessione resettata!', 'success');
            }
        }

        function showOnlyDifficult() {
            const difficultCards = allFlashcards.filter(card => {
                const history = studyHistory[card.id];
                return history && history.difficulty === 'hard';
            });
            
            if (difficultCards.length === 0) {
                showToast('Nessuna carta difficile trovata!', 'info');
                return;
            }
            
            currentDeck = difficultCards;
            currentCardIndex = 0;
            showCurrentCard();
            updateProgress();
            showToast(`${difficultCards.length} carte difficili caricate`, 'success');
        }

        function showSessionComplete() {
            document.getElementById('flashcardContainer').style.display = 'none';
            document.getElementById('sessionComplete').style.display = 'block';
            
            const accuracy = cardsStudied > 0 ? Math.round((correctAnswers / cardsStudied) * 100) : 0;
            
            const summary = document.getElementById('sessionSummary');
            summary.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <strong>Domande affrontate:</strong> ${cardsStudied}<br>
                    <strong>Risposte eccellenti:</strong> ${accuracy}%<br>
                    <strong>Serie migliore:</strong> ${currentStreak}
                </div>
                <div>
                    <span style="color: #10b981;">Perfette: ${sessionStats.easy}</span> | 
                    <span style="color: #f59e0b;">Buone: ${sessionStats.medium}</span> | 
                    <span style="color: #ef4444;">Da rivedere: ${sessionStats.hard}</span>
                </div>
            `;
        }

        function restartSession() {
            resetSession();
        }

        // Gestione tastiera
        document.addEventListener('keydown', function(event) {
            if (document.getElementById('sessionComplete').style.display !== 'none') return;
            if (document.getElementById('editModal').style.display === 'block') return;
            if (document.getElementById('addCardModal').style.display === 'block') return;
            if (document.getElementById('categoryModal').style.display === 'block') return;
            
            switch(event.key.toLowerCase()) {
                case ' ':
                    event.preventDefault();
                    if (document.getElementById('currentFlashcard')) {
                        flipCard({target: document.getElementById('currentFlashcard')});
                    }
                    break;
                case '1':
                    if (isFlipped) markDifficulty('easy', event);
                    break;
                case '2':
                    if (isFlipped) markDifficulty('medium', event);
                    break;
                case '3':
                    if (isFlipped) markDifficulty('hard', event);
                    break;
                case 'e':
                    event.preventDefault();
                    openEditModal(event);
                    break;
            }
        });

        // Chiudi modali cliccando fuori
        window.onclick = function(event) {
            const categoryModal = document.getElementById('categoryModal');
            const editModal = document.getElementById('editModal');
            const addCardModal = document.getElementById('addCardModal');

            if (event.target == categoryModal) {
                categoryModal.style.display = "none";
            }
            if (event.target == editModal) {
                editModal.style.display = "none";
            }
            if (event.target == addCardModal) {
                addCardModal.style.display = "none";
            }
        }
    </script>
</body>
</html>
