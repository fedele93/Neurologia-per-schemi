<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Algoritmo Decisionale - Emergenze Iperglicemiche</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.3;
            background: white;
            color: #1a1a1a;
            padding: 2px;
            font-size: 13px;
            overflow-x: hidden;
        }
        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
        }
        .main-header {
            background: #d32f2f;
            color: white;
            text-align: center;
            font-weight: bold;
            font-size: clamp(12px, 5vw, 18px);
            padding: 8px 4px;
            margin-bottom: 6px;
            border-radius: 4px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .back-link {
            display: inline-block;
            background: #1976d2;
            color: white;
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 4px;
            margin-bottom: 10px;
            font-weight: bold;
            font-size: clamp(11px, 3.5vw, 14px);
        }
        .back-link:hover {
            background: #1565c0;
        }
        .back-link::before {
            content: "‚Üê ";
        }
        .section {
            margin-bottom: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .section-title {
            background: #1976d2;
            color: white;
            font-weight: bold;
            font-size: clamp(11px, 4vw, 15px);
            padding: 6px 8px;
            text-align: center;
        }
        .section-content {
            padding: 8px;
            font-size: clamp(9px, 3vw, 13px);
        }
        .mermaid-container {
            background: #fafafa;
            border-radius: 6px;
            padding: 6px;
            margin: 8px 0;
            overflow-x: auto;
            touch-action: pan-x pan-y;
        }
        .mermaid {
            min-width: 100%;
            font-size: 11px;
        }
        .mermaid svg {
            width: 100%;
            height: auto;
            min-width: 100%;
        }
        .instructions {
            background: #e3f2fd;
            border-left: 3px solid #1976d2;
            padding: 8px;
            margin: 8px 0;
            border-radius: 3px;
        }
        .instructions h3 {
            color: #1976d2;
            margin-bottom: 4px;
            font-size: clamp(10px, 3.5vw, 14px);
        }
        .instructions p {
            font-size: clamp(9px, 3vw, 12px);
            line-height: 1.3;
            margin-bottom: 4px;
        }
        .legend {
            background: #fff3e0;
            border: 1px solid #ff9800;
            border-radius: 4px;
            padding: 8px;
            margin: 8px 0;
        }
        .legend h3 {
            color: #e65100;
            margin-bottom: 6px;
            font-size: clamp(10px, 3.5vw, 14px);
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 4px;
            font-size: clamp(9px, 3vw, 12px);
        }
        .legend-color {
            width: 16px;
            height: 10px;
            margin-right: 6px;
            border-radius: 2px;
            border: 1px solid #ccc;
        }
        .mild { background: #fff3e0; }
        .ketosis { background: #ffe0b2; }
        .dka { background: #ffebee; }
        .hss { background: #f3e5f5; }
        .treatment { background: #e8f5e8; }
        .monitoring { background: #e3f2fd; }
        .decision { background: #f3e5f5; }
        .quick-nav {
            background: #f8f9fa;
            border: 1px solid #28a745;
            border-radius: 4px;
            padding: 8px;
            margin: 8px 0;
        }
        .quick-nav h3 {
            color: #28a745;
            margin-bottom: 6px;
            font-size: clamp(10px, 3.5vw, 14px);
        }
        .nav-button {
            background: #28a745;
            color: white;
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 3px;
            font-weight: 500;
            text-align: center;
            font-size: clamp(10px, 3vw, 13px);
            display: inline-block;
            margin: 2px;
        }
        .footer-section {
            background: #f8f9fa;
            border-top: 1px solid #ddd;
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            font-size: clamp(8px, 2.5vw, 11px);
        }
        @media print {
            .back-link, .quick-nav {
                display: none;
            }
            body {
                font-size: 8px;
            }
            .mermaid svg {
                max-width: 100% !important;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-header">
            üìä ALGORITMO DECISIONALE EMERGENZE IPERGLICEMICHE
        </div>
        <a href="emergenze-iperglicemiche-completo.html" class="back-link">
            Torna al protocollo completo
        </a>
        <div class="instructions">
            <h3>üìã Come utilizzare questo algoritmo</h3>
            <p>Questo diagramma di flusso guida attraverso la diagnosi differenziale e il trattamento delle emergenze iperglicemiche. Inizia identificando lo scenario clinico in base ai parametri laboratoristici, poi segui il percorso specifico per il trattamento appropriato.</p>
            <p>Ogni nodo contiene riferimenti alle BOX del protocollo dettagliato per dosaggi e procedure specifiche.</p>
        </div>
        <div class="legend">
            <h3>üé® Legenda colori degli scenari</h3>
            <div class="legend-item">
                <div class="legend-color mild"></div>
                <span>Iperglicemia semplice (giallo)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color ketosis"></div>
                <span>Iperglicemia con chetosi (arancione)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color dka"></div>
                <span>Chetoacidosi diabetica DKA (rosso)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color hss"></div>
                <span>Stato iperosmolare HSS (viola)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color treatment"></div>
                <span>Fasi di trattamento (verde)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color monitoring"></div>
                <span>Monitoraggio e follow-up (blu)</span>
            </div>
        </div>
        <div class="quick-nav">
            <h3>üîó Link rapidi al protocollo</h3>
            <a href="emergenze-iperglicemiche-completo.html#box1" class="nav-button">BOX 1: Disidratazione</a>
            <a href="emergenze-iperglicemiche-completo.html#box2" class="nav-button">BOX 2: Potassiemia</a>
            <a href="emergenze-iperglicemiche-completo.html#box3" class="nav-button">BOX 3: Insulina EV</a>
            <a href="emergenze-iperglicemiche-completo.html#box4" class="nav-button">BOX 4: Monitoraggio</a>
            <a href="emergenze-iperglicemiche-completo.html#box5" class="nav-button">BOX 5: Fine Protocollo</a>
        </div>
        <div class="section">
            <div class="section-title">üìä DIAGRAMMA DECISIONALE COMPLETO</div>
            <div class="section-content">
                <div class="mermaid-container">
                    <div class="mermaid">
flowchart TD
    subgraph Scenarios["Scenari clinici di presentazione"]
        A["Iperglicemia moderata-severa\nGlicemia > 250 mg/dl\nSenza chetosi/acidosi/iperosmolarit√†\nPaziente cosciente e stabile"]
        B["Iperglicemia con chetosi\nGlicemia > 250 mg/dl\nKetonemia >3 mmol/L\npH > 7.3, HCO3‚Åª normale\nSintomi intermedi"]
        C["Chetoacidosi diabetica (DKA)\nGlicemia > 250 mg/dl\npH <7.30\nBicarbonati <15 mmol/L\nKetonemia elevata, paziente grave"]
        D["Stato iperosmolare (HSS)\nGlicemia > 600 mg/dl\nOsmolarit√† >320 mOsm/kg\nDisidratazione severa\nAlterazioni neurologiche"]
    end

    A --> Step1
    B --> Step1
    C --> Step1
    D --> Step1

    Step1["STEP 1: Stabilizzazione immediata\nCorreggere disidratazione con SF 0.9%\n500-1000 ml prima ora\nAccesso venoso grosso calibro\nVedi BOX 1"]

    Step1 --> Step2["STEP 2: Valutazione completa\nEsami ematochimici completi\nEGA, elettroliti, osmolarit√†\nRicerca fattori precipitanti\nECG, Rx torace se indicato"]

    Step2 --> PathA{"Percorso A\nIperglicemia semplice"}
    Step2 --> PathB{"Percorso B\nCon chetosi"}
    Step2 --> PathC{"Percorso C\nDKA"}
    Step2 --> PathD{"Percorso D\nHSS"}

    PathA --> TreatA["TRATTAMENTO A\nContinuare SF 0.9% + K se necessario\nInsulina SC solo se glicemia persistente\nVedi BOX 1,2,3bis"]
    PathB --> TreatB["TRATTAMENTO B\nContinuare SF 0.9%\nCorrezione potassiemia\nInsulina SC programmata\nVedi BOX 1,2,3bis"]
    PathC --> TreatC["TRATTAMENTO C\nSF 0.9% continua\nInsulina EV obbligatoria\nGestione K+ aggressiva\nVedi BOX 1,2,3"]
    PathD --> TreatD["TRATTAMENTO D\nSF 0.9% o emitonica 0.45%\nInsulina EV con cautela\nMonitoraggio neurologico\nVedi BOX 1,2,3"]

    TreatA --> Monitor
    TreatB --> Monitor
    TreatC --> Monitor
    TreatD --> Monitor

    Monitor["MONITORAGGIO CONTINUO\nParametri vitali ogni ora\nGlicemia e ketonemia oraria\nElettroliti ogni 2-4 ore\nVedi BOX 4"]

    Monitor --> ExitCriteria{"CRITERI DI USCITA\nKetonemia <0.6 mmol/L\nHCO3‚Åª >15 mmol/L\nOsmolarit√† normale\nAlimentazione ripresa"}

    ExitCriteria -->|S√¨| Exit["TRANSIZIONE E DIMISSIONE\nSchema insulinico basal-bolus\nTrattamento fattori precipitanti\nConsulenza diabetologica\nVedi BOX 5"]
    ExitCriteria -->|No| Monitor

    %% Stili per differenziazione visiva
    classDef mild fill:#fff3e0,stroke:#ff9800,stroke-width:3px,color:#e65100;
    classDef ketosis fill:#ffe0b2,stroke:#f57c00,stroke-width:3px,color:#ef6c00;
    classDef dka fill:#ffebee,stroke:#d32f2f,stroke-width:3px,color:#c62828;
    classDef hss fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px,color:#6a1b9a;
    classDef treatment fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#1b5e20;
    classDef monitoring fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#0d47a1;
    classDef decision fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px,color:#7b1fa2;

    class A mild
    class B ketosis
    class C dka
    class D hss
    class Step1,Step2,TreatA,TreatB,TreatC,TreatD treatment
    class Monitor,Exit monitoring
    class PathA,PathB,PathC,PathD,ExitCriteria decision
                    </div>
                </div>
            </div>
        </div>
        <div class="section">
            <div class="section-title">üéØ CRITERI DIAGNOSTICI DIFFERENZIALI</div>
            <div class="section-content">
                <div style="background: #f8f9fa; padding: 8px; border-radius: 4px; margin: 6px 0;">
                    <h4 style="color: #495057; margin-bottom: 6px; font-size: clamp(10px, 3vw, 13px);">Parametri chiave per la diagnosi differenziale:</h4>
                    <ul style="font-size: clamp(9px, 2.8vw, 12px); line-height: 1.3; margin-left: 16px;">
                        <li><strong>Glicemia:</strong> Soglia 250 mg/dl per iperglicemia significativa, >600 mg/dl suggerisce HSS</li>
                        <li><strong>pH arterioso:</strong> <7.30 definisce DKA, >7.30 esclude acidosi significativa</li>
                        <li><strong>Bicarbonati:</strong> <15 mEq/L indica DKA, normali in iperglicemia semplice</li>
                        <li><strong>Ketonemia:</strong> >3 mmol/L indica chetosi, <0.6 mmol/L √® target di risoluzione</li>
                        <li><strong>Osmolarit√†:</strong> >320 mOsm/kg caratterizza HSS, calcolo: 2√óNa + glucosio/18 + urea/2.8</li>
                        <li><strong>Stato neurologico:</strong> Alterazioni significative orientano verso HSS</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-section">
            <h3>‚ÑπÔ∏è Informazioni sull'algoritmo</h3>
            <p><strong>Scopo:</strong> Guida decisionale rapida per la diagnosi differenziale e il trattamento iniziale delle emergenze iperglicemiche nell'adulto.</p>
            <p><strong>Uso raccomandato:</strong> Consultare insieme al protocollo dettagliato per dosaggi specifici, parametri di monitoraggio e criteri di fine trattamento.</p>
            <p><strong>Aggiornamento:</strong> Settembre 2025 - Basato su linee guida ADA 2024, JBDS e EASD</p>
        </div>
    </div>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#e3f2fd',
                primaryTextColor: '#0d47a1',
                primaryBorderColor: '#1976d2',
                lineColor: '#424242',
                secondaryColor: '#f3e5f5',
                tertiaryColor: '#e8f5e8',
                background: '#ffffff',
                mainBkg: '#ffffff',
                secondBkg: '#f5f5f5',
                cScale0: '#fff3e0',
                cScale1: '#ffcc80',
                cScale2: '#ffb74d'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis',
                nodeSpacing: 35,
                rankSpacing: 55,
                diagramPadding: 8,
                wrappingWidth: 200
            }
        });
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Algoritmo decisionale emergenze iperglicemiche caricato');

            // Adattamento responsive del diagramma
            function handleResize() {
                const diagram = document.querySelector('.mermaid');
                if (diagram) {
                    if (window.innerWidth < 600) {
                        diagram.style.fontSize = '10px';
                    } else if (window.innerWidth < 400) {
                        diagram.style.fontSize = '9px';
                    } else {
                        diagram.style.fontSize = '11px';
                    }
                }
            }

            window.addEventListener('resize', handleResize);
            handleResize();
        });

        // Gestione errori Mermaid
        window.addEventListener('error', function(e) {
            if (e.message && e.message.includes('mermaid')) {
                console.error('Errore nel caricamento del diagramma:', e);
                const container = document.querySelector('.mermaid-container');
                if (container) {
                    container.innerHTML =
                        '<div style="color: #d32f2f; text-align: center; padding: 15px; font-weight: bold; border: 2px solid #f44336; border-radius: 4px;">' +
                        '‚ö†Ô∏è Errore nel caricamento del diagramma.<br/>' +
                        'Ricarica la pagina o consulta il protocollo dettagliato.' +
                        '</div>';
                }
            }
        });
    </script>
</body>
</html>
